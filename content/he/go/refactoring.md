---
title:                "רפקטורינג"
date:                  2024-01-26T01:35:45.972179-07:00
model:                 gpt-4-0125-preview
simple_title:         "רפקטורינג"

tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/he/go/refactoring.md"
---

{{< edit_this_page >}}

## מה ולמה?
ריפקטורינג היא התהליך של מבנה מחדש של קוד מחשב קיים מבלי לשנות את התנהגותו החיצונית. מתכנתים עושים זאת כדי לשפר אתריביות שאינן תפקודיות של התוכנה, כמו קריאות ותחזוקתיות, אשר יכולות להפוך את הקוד לקל יותר להבנה, להפחית את המורכבות ולעזור לאתר באגים בקלות רבה יותר.

## איך לעשות:
בואו נצלול לדוגמת ריפקטורינג קוד Go פשוטה. ניקח קטע המחשב ממוצע של מערך מספרים ונשנה אותו למובן ולניתן לשימוש חוזר.

קוד מקורי:
```Go
package main

import "fmt"

func main() {
    numbers := []float64{8, 12, 15, 10, 7, 14}
    var sum float64
    for _, num := range numbers {
        sum += num
    }
    average := sum / float64(len(numbers))
    fmt.Println("Average:", average)
}
```

קוד שעבר ריפקטורינג:
```Go
package main

import "fmt"

// CalculateAverage לוקח מערך של float64 ומחזיר את הממוצע.
func CalculateAverage(numbers []float64) float64 {
    sum := 0.0
    for _, num := range numbers {
        sum += num
    }
    return sum / float64(len(numbers))
}

func main() {
    numbers := []float64{8, 12, 15, 10, 7, 14}
    average := CalculateAverage(numbers)
    fmt.Println("Average:", average)
}
```

בקוד שעבר ריפקטורינג, הוצאנו החוצה את הלוגיקה המחשבת את הממוצע לפונקציה נפרדת בשם `CalculateAverage`. זה מעשה את פונקציית ה`main` יותר תמציתית ואת לוגיקת חישוב הממוצע ניתנת לשימוש חוזר ולבדיקה.

## טבילה עמוקה
ריפקטורינג של קוד אינו מושג מודרני; הוא קדם לשימוש הנרחב במחשבים. התרגול כנראה החל בתחום ההנדסה המכנית או אף לפני כן. בתוכנה, הוא הפך למסודר יותר עם תחילתה של התכנות מונחה העצמים והתכנות הקיצוני (XP) בשנות ה-90, בהשפעה בולטת של הספר המוביל של מרטין פאולר "Refactoring: Improving the Design of Existing Code".

ישנן טכניקות ריפקטורינג רבות, החל משינויים פשוטים כמו שינוי שמות משתנים לצורך בהירות ועד לתבניות מורכבות יותר כמו הוצאת שיטות או מחלקות. המפתח הוא לבצע שינויים קטנים והדרגתיים אשר לא משנים את פונקציונליות התוכנה אך משפרים את המבנה הפנימי.

כאשר משתמשים ב-Go, ריפקטורינג יכול להיות פשוט יחסית בזכות פשטות השפה והספרייה הסטנדרטית העוצמתית. עם זאת, עדיין חשוב להחזיק מערך טוב של בדיקות יחידה כדי לוודא שהריפקטורינג לא מביא לבאגים. כלים כמו `gorename` ו-`gofmt` עוזרים לאוטמט את חלק מהתהליך, וסביבות פיתוח משולבות (IDE) לעיתים קרובות מכילות תמיכה מובנית בריפקטורינג.

לצד הריפקטורינג הידני, ישנם כמה כלים אוטומטיים לריפקטורינג קוד זמינים ל-Go, כמו הכלים של GoLand ו-Go Refactor. על אף שאלה יכולים למהר את התהליך, הם אינם תחליף להבנת הקוד ולביצוע שינויים בחשיבה.

## ראו גם
 - [ריפקטורינג ב-Go: פשוט זה יפה](https://go.dev/blog/slices)
 - [Go יעיל: ריפקטורינג עם ממשקים](https://go.dev/doc/effective_go#interfaces)
 - [דף הריפקטורינג של מרטין פאולר](https://refactoring.com/)
 - [כלי ריפקטורינג של GoLand](https://www.jetbrains.com/go/features/refactorings/)
