---
aliases:
- /he/ruby/editing-files-in-place-with-cli-one-liners/
date: 2024-01-27 16:21:35.958774-07:00
description: "\u05E2\u05E8\u05D9\u05DB\u05EA \u05E7\u05D1\u05E6\u05D9\u05DD \u05D1\
  \u05DE\u05E7\u05D5\u05DD \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05E9\u05D5\
  \u05E8\u05D5\u05EA \u05E4\u05E7\u05D5\u05D3\u05D4 \u05D0\u05D7\u05EA \u05E2\u05DD\
  \ \u05DE\u05DE\u05E9\u05E7 \u05E9\u05D5\u05E8\u05EA \u05D4\u05E4\u05E7\u05D5\u05D3\
  \u05D4 (CLI) \u05D1-Ruby \u05DE\u05D0\u05E4\u05E9\u05E8\u05EA \u05DC\u05DA \u05DC\
  \u05E9\u05E0\u05D5\u05EA \u05E7\u05D1\u05E6\u05D9\u05DD \u05D9\u05E9\u05D9\u05E8\
  \u05D5\u05EA \u05DE\u05D4\u05D8\u05E8\u05DE\u05D9\u05E0\u05DC \u05E9\u05DC\u05DA\
  , \u05DE\u05D1\u05DC\u05D9 \u05DC\u05E6\u05D5\u05E8\u05DA \u05DC\u05E4\u05EA\u05D5\
  \u05D7 \u05D0\u05D5\u05EA\u05DD \u05D1\u05E2\u05D5\u05E8\u05DA, \u05DC\u05D1\u05E6\
  \u05E2\u2026"
lastmod: 2024-02-18 23:08:53.386691
model: gpt-4-0125-preview
summary: "\u05E2\u05E8\u05D9\u05DB\u05EA \u05E7\u05D1\u05E6\u05D9\u05DD \u05D1\u05DE\
  \u05E7\u05D5\u05DD \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05E9\u05D5\u05E8\
  \u05D5\u05EA \u05E4\u05E7\u05D5\u05D3\u05D4 \u05D0\u05D7\u05EA \u05E2\u05DD \u05DE\
  \u05DE\u05E9\u05E7 \u05E9\u05D5\u05E8\u05EA \u05D4\u05E4\u05E7\u05D5\u05D3\u05D4\
  \ (CLI) \u05D1-Ruby \u05DE\u05D0\u05E4\u05E9\u05E8\u05EA \u05DC\u05DA \u05DC\u05E9\
  \u05E0\u05D5\u05EA \u05E7\u05D1\u05E6\u05D9\u05DD \u05D9\u05E9\u05D9\u05E8\u05D5\
  \u05EA \u05DE\u05D4\u05D8\u05E8\u05DE\u05D9\u05E0\u05DC \u05E9\u05DC\u05DA, \u05DE\
  \u05D1\u05DC\u05D9 \u05DC\u05E6\u05D5\u05E8\u05DA \u05DC\u05E4\u05EA\u05D5\u05D7\
  \ \u05D0\u05D5\u05EA\u05DD \u05D1\u05E2\u05D5\u05E8\u05DA, \u05DC\u05D1\u05E6\u05E2\
  \u2026"
title: "\u05E2\u05E8\u05D9\u05DB\u05EA \u05E7\u05D1\u05E6\u05D9\u05DD \u05D1\u05DE\
  \u05E7\u05D5\u05DD \u05E2\u05DD \u05E9\u05D5\u05E8\u05D5\u05EA \u05E4\u05E7\u05D5\
  \u05D3\u05D4 \u05D7\u05D3-\u05E9\u05D5\u05E8\u05EA\u05D9\u05D5\u05EA"
---

{{< edit_this_page >}}

## מה ולמה?

עריכת קבצים במקום באמצעות שורות פקודה אחת עם ממשק שורת הפקודה (CLI) ב-Ruby מאפשרת לך לשנות קבצים ישירות מהטרמינל שלך, מבלי לצורך לפתוח אותם בעורך, לבצע שינויים ולשמור אותם בחזרה. טכניקה זו שימושית ביותר עבור תיקונים מהירים, עדכוני סידרה או אוטומציה של משימות חוזרות, חוסכת זמן ומאמץ.

## איך לעשות:

Ruby מספקת דרך ישירה לערוך קבצים במקום ישירות משורת הפקודה. בעזרת מתג `-i` של Ruby, תוכלו לומר ל-Ruby לפעול ישירות על הקובץ/קבצים הספציפיים. בואו נשחק עם כמה דוגמאות כדי לראות איך זה עובד בפועל. דמיינו שיש לכם קובץ בשם `greetings.txt` עם התוכן הבא:

```
Hello, world!
Hello, Ruby!
Hello, programming!
```

ואתם רוצים להחליף את המילה "Hello" ב-"Hi". הנה איך אתם יכולים לעשות זאת:

```Ruby
ruby -i -pe "gsub(/Hello/, 'Hi')" greetings.txt
```

לאחר הרצת הפקודה הזו, הקובץ `greetings.txt` יעודכן ל:

```
Hi, world!
Hi, Ruby!
Hi, programming!
```

אם אתם דואגים לגבי האפשרות להרוס נתונים בטעות, Ruby דואגת לכם. על ידי הזנת סיומת למתג `-i`, Ruby יוצרת גיבוי לפני ביצוע השינויים. לדוגמה:

```Ruby
ruby -i.bak -pe "gsub(/Hello/, 'Bye')" greetings.txt
```

עכשיו, לצד הקובץ `greetings.txt` המעודכן שלכם, תמצאו גם `greetings.txt.bak` באותו ספרייה, המכיל את התוכן המקורי.

## צלילה עמוקה

הקסם של עריכת קבצים במקום ב-Ruby מגיע משילוב יכולות עיבוד טקסט בסגנון Perl עם האלגנטיות התחבירית של Ruby. מבחינה היסטורית, Perl הייתה השפה לכתיבת סקריפטים לשורת פקודה בשנייה, במיוחד למניפולציות טקסט. Ruby אימצה את הפרדיגמה הזו, מאפשרת יכולת סקריפטינג בשורת הפקודה חזקה.

קיימות חלופות לעריכה במקום בשפות אחרות, כמו Perl עצמה ו-sed, עורך זרימה במערכות Unix. לכל אחד מהם יתרונות — Perl ידועה בעוצמתה לעיבוד טקסט בעוד ש-sed בלתי מתחרה בפשטותו למשימות עריכת זרימה. עם זאת, Ruby מציעה איזון, מספקות מניפולציה טקסט חזקה עם תחביר יותר קריא ונוח למשתמש, במיוחד למי שכבר מכיר ב-Ruby.

מבחינת היישום, עריכת קבצים במקום ב-Ruby פועלת על ידי שינוי שם הקובץ המקורי, יצירת קובץ חדש עם שם הקובץ המקורי, ואז כתיבת השינויים לקובץ החדש תוך קריאה מהקובץ המקורי ששונה שמו. גישה זו מבטיחה את האטומיות של הפעולה; או שכל הקובץ עובד בהצלחה, או שלא נעשות שינויים, מגנה על שלמות הנתונים שלך במהלך תהליך העריכה. מנגנון זה, יחד עם טיפול בחריגים של Ruby, מספק גם התמודדות מול הפרעות, כמו נפילות חשמל או הרג תהליכים, מבטיח שלפחות הגיבוי יישאר שלם.

לסיכום, עריכת קבצים במקום ב-Ruby היא עדות לשימושיותה כשפת סקריפטינג, מציעה תערובת של עוצמה, פשטות, ואלגנטיות למשימות מניפולציה של טקסט ישירות משורת הפקודה.
