---
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-28 23:56:41.698405-07:00
description: "\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\
  \u0435\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u043E\u0437\
  \u043D\u0430\u0447\u0430\u0435\u0442 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435\
  \ \u0444\u0430\u0439\u043B\u0430 \u0434\u043B\u044F \u043A\u0440\u0430\u0442\u043A\
  \u043E\u0441\u0440\u043E\u0447\u043D\u043E\u0433\u043E \u0438\u0441\u043F\u043E\u043B\
  \u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F, \u043E\u0431\u044B\u0447\u043D\
  \u043E \u0434\u043B\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\
  \u044F \u0434\u0430\u043D\u043D\u044B\u043C\u0438 \u0432\u043E \u0432\u0440\u0435\
  \u043C\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u043F\
  \u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B.\u2026"
lastmod: '2024-03-13T22:44:45.168892-06:00'
model: gpt-4-0125-preview
summary: "\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\
  \u0435\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u043E\u0437\
  \u043D\u0430\u0447\u0430\u0435\u0442 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435\
  \ \u0444\u0430\u0439\u043B\u0430 \u0434\u043B\u044F \u043A\u0440\u0430\u0442\u043A\
  \u043E\u0441\u0440\u043E\u0447\u043D\u043E\u0433\u043E \u0438\u0441\u043F\u043E\u043B\
  \u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F, \u043E\u0431\u044B\u0447\u043D\
  \u043E \u0434\u043B\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\
  \u044F \u0434\u0430\u043D\u043D\u044B\u043C\u0438 \u0432\u043E \u0432\u0440\u0435\
  \u043C\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u043F\
  \u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B."
title: "\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\u0435\
  \u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430"
weight: 21
---

## Как это сделать:
Haskell предоставляет пакет `temporary`, который включает удобные функции для работы с временными файлами. Вот быстрый пример:

```haskell
import System.IO.Temp (withSystemTempFile)
import System.IO (hPutStrLn, hClose)

main :: IO ()
main = withSystemTempFile "mytemp.txt" $ \tempFilePath tempFileHandle -> do
    -- Запишем что-нибудь в временный файл
    hPutStrLn tempFileHandle "Привет, временный файл!"
    -- Закроем файл (это также происходит автоматически!)
    hClose tempFileHandle
    putStrLn $ "Временный файл был создан по пути: " ++ tempFilePath
```

Пример вывода:

```
Временный файл был создан по пути: /tmp/mytemp.txt123456
```

## Глубокое Погружение
Раньше управление временными файлами могло быть проблематичным и рискованным из-за условий гонки — когда две программы пытаются создать или использовать один и тот же файл. Поэтому был создан пакет `temporary` для Haskell. Он предоставляет функции вроде `withSystemTempFile`, которая создает временный файл и автоматически избавляется от него, когда вы закончили. Довольно аккуратно для поддержания ваших файловых операций чистыми и упорядоченными.

Существуют альтернативы, такие как использование пакета `unix` для тонких настроек над файловыми операциями, но `temporary` абстрагирует сложность. При использовании `temporary` имена файлов уникальны благодаря внутренним функциям. Никакие два временных файла не будут конфликтовать, что немного облегчает вашу жизнь.

Магия подхода Haskell включает в себя его функциональную природу, гарантирующую, что побочные эффекты, такие как создание файла, обрабатываются осторожно. Он опирается на свою систему типов и IO монаду для ответственного управления ресурсами.

## Смотрите Также
- [Документация `System.IO.Temp`](https://hackage.haskell.org/package/temporary-1.3/docs/System-IO-Temp.html): Официальная документация функций для работы с временными файлами.
- [Real-World Haskell, Глава 7, Ввод-вывод](http://book.realworldhaskell.org/read/io.html): Раздел книги, объясняющий ввод-вывод в Haskell, который подробно описывает создание временных файлов.
