---
aliases:
- /ru/haskell/reading-a-text-file/
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:01:19.828264-07:00
description: "\u0427\u0442\u0435\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u043E\
  \u0432\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u0432 \u043F\u0440\u043E\
  \u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0438 \u043F\
  \u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0432\u0430\u0448\u0435\u043C\u0443\
  \ \u043A\u043E\u0434\u0443 \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u044C \u0434\
  \u0430\u043D\u043D\u044B\u0435, \u043A\u0430\u043A \u0435\u0441\u043B\u0438 \u0431\
  \u044B \u0432\u044B \u0437\u0430\u043B\u0438\u0432\u0430\u043B\u0438 \u043A\u043E\
  \u0444\u0435 \u0441\u0435\u0431\u0435 \u0432 \u043C\u043E\u0437\u0433 \u0443\u0442\
  \u0440\u043E\u043C. \u041C\u044B \u0434\u0435\u043B\u0430\u0435\u043C \u044D\u0442\
  \u043E \u0434\u043B\u044F \u0442\u043E\u0433\u043E,\u2026"
lastmod: 2024-02-18 23:08:57.069975
model: gpt-4-0125-preview
summary: "\u0427\u0442\u0435\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u043E\
  \u0432\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u0432 \u043F\u0440\u043E\
  \u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0438 \u043F\
  \u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0432\u0430\u0448\u0435\u043C\u0443\
  \ \u043A\u043E\u0434\u0443 \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u044C \u0434\
  \u0430\u043D\u043D\u044B\u0435, \u043A\u0430\u043A \u0435\u0441\u043B\u0438 \u0431\
  \u044B \u0432\u044B \u0437\u0430\u043B\u0438\u0432\u0430\u043B\u0438 \u043A\u043E\
  \u0444\u0435 \u0441\u0435\u0431\u0435 \u0432 \u043C\u043E\u0437\u0433 \u0443\u0442\
  \u0440\u043E\u043C. \u041C\u044B \u0434\u0435\u043B\u0430\u0435\u043C \u044D\u0442\
  \u043E \u0434\u043B\u044F \u0442\u043E\u0433\u043E,\u2026"
title: "\u0427\u0442\u0435\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u043E\u0432\
  \u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430"
---

{{< edit_this_page >}}

## Что и Почему?
Чтение текстового файла в программировании позволяет вашему коду получать данные, как если бы вы заливали кофе себе в мозг утром. Мы делаем это для того, чтобы подать программам информацию, которой они иначе бы не имели, как настройки, данные для обработки или инструкции для выполнения.

## Как это сделать:
Вот как заставить Haskell читать текстовые файлы, не потея. Откройте ваш любимый редактор, и давайте писать код.

```Haskell
import System.IO

main = do
    -- Открываем файл в режиме чтения
    handle <- openFile "hello.txt" ReadMode
    -- Читаем содержимое файла
    content <- hGetContents handle
    -- Печатаем содержимое файла
    putStrLn content
    -- Не забываем закрыть дескриптор файла!
    hClose handle
```

Запустите это, и если у вас есть "hello.txt" с "Hello, World!" внутри, вы получите:

```
Hello, World!
```

Вот более короткий и изящный способ, делающий то же самое, но без лишних хлопот:

```Haskell
-- 'readFile' открывает и читает одним махом
main = do
    content <- readFile "hello.txt"
    putStrLn content
```

Выходные данные все те же,

```
Hello, World!
```

## Погружение

Давным-давно программы были асоциальными существами, в основном обрабатывающими данные, которые они сами же и генерировали. Но со временем сложность возросла, как и необходимость привлекать внешнюю информацию, так что чтение из файлов стало обыденным делом.

Haskell предлагает различные способы чтения файлов. Мы можем делать это низкоуровневым способом с помощью `openFile`, `hGetContents` и `hClose` или действовать проще с `readFile`, который аккуратно все упаковывает.

`readFile` - ленивый; он читает содержимое по мере необходимости, что эффективно по памяти для больших файлов, но может привести к сюрпризам, если файл изменяется посреди работы. Низкоуровневый подход дает больше контроля, делая его более предсказуемым, но также и более многословным. Для гигантских текстов помогают управлять памятью и обработкой более тонко такие функции Haskell, как `hGetLine`, или библиотеки вроде `conduit` и `pipes`.

Стандартные `IO` действия Haskell обращаются с файлами, используя механизмы базовой ОС. Библиотеки абстрагируют это в более удобные для пользователя операции, но в конечном счете они построены на основе `IO` монады Haskell, что обеспечивает выполнение действий в правильном порядке.

## Смотрите также

- Для официальной документации Haskell, посетите [документацию Haskell по вводу и выводу](https://www.haskell.org/tutorial/io.html).
- Если хотите узнать больше, насладитесь чашечкой знаний на [Learn You a Haskell for Great Good!](http://learnyouahaskell.com/input-and-output).
- Углубите свое понимание управления файлами с [точки зрения IO в Real World Haskell](http://book.realworldhaskell.org/read/io.html).
- Исследуйте библиотеки потоковой передачи для больших файлов с [conduit](https://hackage.haskell.org/package/conduit) и [pipes](https://hackage.haskell.org/package/pipes).
