---
aliases:
- /ru/cpp/checking-if-a-directory-exists/
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-28 23:56:19.793330-07:00
description: "\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0441\u0443\u0449\u0435\
  \u0441\u0442\u0432\u043E\u0432\u0430\u043D\u0438\u044F \u0434\u0438\u0440\u0435\u043A\
  \u0442\u043E\u0440\u0438\u0438 \u0437\u0430\u043A\u043B\u044E\u0447\u0430\u0435\u0442\
  \u0441\u044F \u0432 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\
  \u043D\u0438\u0438 \u043D\u0430\u043B\u0438\u0447\u0438\u044F \u0443\u043A\u0430\
  \u0437\u0430\u043D\u043D\u043E\u0439 \u043F\u0430\u043F\u043A\u0438 \u0432 \u0444\
  \u0430\u0439\u043B\u043E\u0432\u043E\u0439 \u0441\u0438\u0441\u0442\u0435\u043C\u0435\
  . \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442\u044B \u0434\
  \u0435\u043B\u0430\u044E\u0442 \u044D\u0442\u043E, \u0447\u0442\u043E\u0431\u044B\
  \ \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044C \u043E\u0448\u0438\u0431\u043E\
  \u043A\u2026"
lastmod: 2024-02-18 23:08:57.375825
model: gpt-4-0125-preview
summary: "\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0441\u0443\u0449\u0435\
  \u0441\u0442\u0432\u043E\u0432\u0430\u043D\u0438\u044F \u0434\u0438\u0440\u0435\u043A\
  \u0442\u043E\u0440\u0438\u0438 \u0437\u0430\u043A\u043B\u044E\u0447\u0430\u0435\u0442\
  \u0441\u044F \u0432 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\
  \u043D\u0438\u0438 \u043D\u0430\u043B\u0438\u0447\u0438\u044F \u0443\u043A\u0430\
  \u0437\u0430\u043D\u043D\u043E\u0439 \u043F\u0430\u043F\u043A\u0438 \u0432 \u0444\
  \u0430\u0439\u043B\u043E\u0432\u043E\u0439 \u0441\u0438\u0441\u0442\u0435\u043C\u0435\
  . \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442\u044B \u0434\
  \u0435\u043B\u0430\u044E\u0442 \u044D\u0442\u043E, \u0447\u0442\u043E\u0431\u044B\
  \ \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044C \u043E\u0448\u0438\u0431\u043E\
  \u043A\u2026"
title: "\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0441\u0443\u0449\u0435\u0441\
  \u0442\u0432\u043E\u0432\u0430\u043D\u0438\u044F \u0434\u0438\u0440\u0435\u043A\u0442\
  \u043E\u0440\u0438\u0438"
---

{{< edit_this_page >}}

## Что и зачем?

Проверка существования директории заключается в подтверждении наличия указанной папки в файловой системе. Программисты делают это, чтобы избежать ошибок при доступе, чтении или записи файлов - это своего рода удостоверение в том, что ящики действительно там, прежде чем класть в них одежду.

## Как:

Начиная с C++17, у нас есть `std::filesystem`, который облегчает жизнь при работе с файловой системой. Вот фрагмент кода для проверки наличия директории:

```C++
#include <iostream>
#include <filesystem>

int main() {
    std::filesystem::path dir_path{"./some_directory"};

    bool exists = std::filesystem::exists(dir_path);
    if(exists) {
        std::cout << "Директория существует." << std::endl;
    } else {
        std::cout << "Директория не существует." << std::endl;
    }

    return 0;
}
```

Пример вывода (если директория существует):
```
Директория существует.
```

Или (если директории не существует):
```
Директория не существует.
```

## Погружение

До C++17 нам приходилось полагаться на платформоспецифические вызовы API или сторонние библиотеки. В API Windows мы могли использовать `GetFileAttributes` и проверять, было ли возвращаемое значение `INVALID_FILE_ATTRIBUTES`. В системах POSIX мы могли использовать функцию `stat()` для аналогичной функциональности.

C++17 изменил правила игры с `std::filesystem`. Он предоставляет кроссплатформенную поддержку и высокоуровневый интерфейс для взаимодействия с файловой системой. Функция `exists()` - это простой способ проверки существования директории, но вы также можете использовать `is_directory()`, если хотите не только подтвердить наличие, но и убедиться, что путь указывает на директорию, а не на файл.

Для альтернативных методов рассмотрите функции `std::filesystem::status_known()` и `std::filesystem::file_status`, чтобы обработать случаи, когда разрешения файлов или другие проблемы могут повлиять на вашу способность определить существование директории.

## Смотрите также

Узнайте больше о операциях с файловой системой в C++:

- [Документация std::filesystem](https://en.cppreference.com/w/cpp/filesystem)
- Для исторического контекста и различий между версиями, смотрите [Историю версий C++](https://en.cppreference.com/w/cpp/compiler_support)
