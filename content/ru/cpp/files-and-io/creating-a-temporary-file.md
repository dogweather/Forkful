---
aliases:
- /ru/cpp/creating-a-temporary-file/
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-28 23:57:05.272743-07:00
description: "\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\
  \u0435\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u043E\u0437\
  \u043D\u0430\u0447\u0430\u0435\u0442 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435\
  \ \u0444\u0430\u0439\u043B\u0430, \u043F\u0440\u0435\u0434\u043D\u0430\u0437\u043D\
  \u0430\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u0434\u043B\u044F \u0432\u0440\
  \u0435\u043C\u0435\u043D\u043D\u043E\u0433\u043E \u0445\u0440\u0430\u043D\u0435\u043D\
  \u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445, \u043A\u043E\u0442\u043E\u0440\
  \u044B\u0439 \u0443\u0434\u0430\u043B\u044F\u0435\u0442\u0441\u044F \u043F\u043E\
  \u0441\u043B\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\
  \u0438\u044F. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442\
  \u044B\u2026"
lastmod: 2024-02-18 23:08:57.381717
model: gpt-4-0125-preview
summary: "\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\
  \u0435\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u043E\u0437\
  \u043D\u0430\u0447\u0430\u0435\u0442 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435\
  \ \u0444\u0430\u0439\u043B\u0430, \u043F\u0440\u0435\u0434\u043D\u0430\u0437\u043D\
  \u0430\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u0434\u043B\u044F \u0432\u0440\
  \u0435\u043C\u0435\u043D\u043D\u043E\u0433\u043E \u0445\u0440\u0430\u043D\u0435\u043D\
  \u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445, \u043A\u043E\u0442\u043E\u0440\
  \u044B\u0439 \u0443\u0434\u0430\u043B\u044F\u0435\u0442\u0441\u044F \u043F\u043E\
  \u0441\u043B\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\
  \u0438\u044F. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442\
  \u044B\u2026"
title: "\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\u0435\
  \u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430"
---

{{< edit_this_page >}}

## Что и Зачем?

Создание временного файла означает создание файла, предназначенного для временного хранения данных, который удаляется после использования. Программисты делают это для обработки промежуточных данных без загромождения файловой системы или риска конфликта с другими файлами.

## Как сделать:

Вот как создать и использовать временный файл в текущем C++:

```C++
#include <cstdio>
#include <filesystem>
#include <iostream>

int main() {
    // Создаем уникальный временный файл с использованием библиотеки filesystem
    std::filesystem::path temp_path = std::filesystem::temp_directory_path() /= std::tmpnam(nullptr);

    // Открываем временный файл
    std::FILE* temp_file = std::fopen(temp_path.c_str(), "w+");
    if (!temp_file) {
        std::perror("Ошибка открытия файла");
        return EXIT_FAILURE;
    }

    // Пишем что-нибудь в него
    std::fputs("Привет, Временный Мир!\n", temp_file);

    // Всегда помните о закрытии файла
    std::fclose(temp_file);

    // Выводим путь к нашему временному файлу
    std::cout << "Временный файл создан в: " << temp_path << std::endl;

    // Очистка: удаляем временный файл
    std::filesystem::remove(temp_path);

    return EXIT_SUCCESS;
}
```

Пример вывода (фактический путь будет отличаться):

```
Временный файл создан в: /tmp/abc123
```

## Глубокое погружение

Временные файлы пригодятся в случаях, например, при сохранении состояния, сортировке больших наборов данных или обработке вывода, который не нужно сохранять. Исторически временные файлы создавались в общедоступной директории (например, `/tmp` в системах Unix) с простой схемой именования, что увеличивало риск коллизий. Современный C++ использует библиотеку `<filesystem>`, чтобы избежать подобных проблем.

Альтернативы включают использование ОЗУ в качестве временного хранилища (как tmpfs в большинстве систем, подобных Unix) или blob'ов в базе данных. Эти методы хранят эфемерные данные в памяти или управляемых системах, снижая накладные расходы на ввод-вывод и улучшая производительность.

С точки зрения реализации, помните, что:
- Операции с файлами могут завершиться сбоем, поэтому всегда проверяйте ваши файловые операции на наличие ошибок.
- Всегда закрывайте файлы, чтобы предотвратить утечки ресурсов.
- Очистите после себя: удаляйте временные файлы (хотя система часто это делает, это хорошая привычка).

## Смотрите также

- [Библиотека файловой системы C++](https://en.cppreference.com/w/cpp/filesystem)
- [Библиотека IOstreams C++](https://en.cppreference.com/w/cpp/io)
- [Обработка временных файлов в C](http://www.cplusplus.com/reference/cstdio/tmpfile/)
