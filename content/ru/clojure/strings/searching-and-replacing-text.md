---
aliases:
- /ru/clojure/searching-and-replacing-text/
changelog:
- 2024-01-29, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:02:26.578077-07:00
description: "\u041F\u043E\u0438\u0441\u043A \u0438 \u0437\u0430\u043C\u0435\u043D\
  \u0430 \u0442\u0435\u043A\u0441\u0442\u0430 \u043F\u043E\u0437\u0432\u043E\u043B\
  \u044F\u0435\u0442 \u043D\u0430\u0445\u043E\u0434\u0438\u0442\u044C \u043A\u043E\
  \u043D\u043A\u0440\u0435\u0442\u043D\u044B\u0435 \u0441\u0442\u0440\u043E\u043A\u0438\
  \ \u0432 \u0442\u0435\u043A\u0441\u0442\u0435 \u0438 \u0437\u0430\u043C\u0435\u043D\
  \u044F\u0442\u044C \u0438\u0445 \u043D\u0430 \u0447\u0442\u043E-\u0442\u043E \u0434\
  \u0440\u0443\u0433\u043E\u0435. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\
  \u0438\u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\u0442\u043E\
  \ \u0434\u043B\u044F \u0431\u044B\u0441\u0442\u0440\u044B\u0445 \u043F\u0440\u0430\
  \u0432\u043E\u043A,\u2026"
lastmod: 2024-02-18 23:08:56.565319
model: gpt-4-0125-preview
summary: "\u041F\u043E\u0438\u0441\u043A \u0438 \u0437\u0430\u043C\u0435\u043D\u0430\
  \ \u0442\u0435\u043A\u0441\u0442\u0430 \u043F\u043E\u0437\u0432\u043E\u043B\u044F\
  \u0435\u0442 \u043D\u0430\u0445\u043E\u0434\u0438\u0442\u044C \u043A\u043E\u043D\
  \u043A\u0440\u0435\u0442\u043D\u044B\u0435 \u0441\u0442\u0440\u043E\u043A\u0438\
  \ \u0432 \u0442\u0435\u043A\u0441\u0442\u0435 \u0438 \u0437\u0430\u043C\u0435\u043D\
  \u044F\u0442\u044C \u0438\u0445 \u043D\u0430 \u0447\u0442\u043E-\u0442\u043E \u0434\
  \u0440\u0443\u0433\u043E\u0435. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\
  \u0438\u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\u0442\u043E\
  \ \u0434\u043B\u044F \u0431\u044B\u0441\u0442\u0440\u044B\u0445 \u043F\u0440\u0430\
  \u0432\u043E\u043A,\u2026"
title: "\u041F\u043E\u0438\u0441\u043A \u0438 \u0437\u0430\u043C\u0435\u043D\u0430\
  \ \u0442\u0435\u043A\u0441\u0442\u0430"
---

{{< edit_this_page >}}

## Что и Почему?

Поиск и замена текста позволяет находить конкретные строки в тексте и заменять их на что-то другое. Программисты делают это для быстрых правок, крупномасштабного рефакторинга или автоматизированной обработки текста. Это базовая, но мощная техника манипуляции с текстом.

## Как это сделать:

В Clojure для поиска и замены текста мы используем функцию `clojure.string/replace`. Давайте сразу перейдем к коду:

```clojure
(require '[clojure.string :as str])

;; Базовая замена
(str/replace "I like apples" "apples" "oranges")
;; => "I like oranges"

;; Использование регулярного выражения для замены всех гласных
(str/replace "Hello, World!" "[AEIOUaeiou]" "*")
;; => "H*ll*, W*rld!"

;; Замена с функцией для динамических изменений
(str/replace "I have 2 apples and 5 bananas"
             #"\d+"
             (fn [match] (str (inc (Integer/parseInt match)))))
;; => "I have 3 apples and 6 bananas"
```

Всё просто. Запустите это, и вы сразу увидите преобразования прямо в вашем REPL.

## Подробнее

Поиск и замена текста – это не новинка. Это старые вычислительные технологии. Мы унаследовали их от ранних редакторов, таких как `sed` в Unix. С тех пор мы проделали долгий путь.

Clojure, работающий на JVM, означает, что у вас под капотом есть мощь регулярных выражений Java. С точки зрения производительности, это прекрасно для быстрых скриптов, но помните, что чрезмерное использование при масштабной обработке текста может снизить производительность.

Что касается альтернатив, помимо `clojure.string/replace`, есть библиотеки, основанные на регулярных выражениях, или даже написание вашей собственной функции, если вы чувствуете в себе смелость. Подумайте о `replace-first`, если вам нужно однократное изменение.

С функциональной точки зрения, подход Clojure к неизменяемости означает, что каждая замена приводит к созданию новой строки. Отсутствие изменяемых строк означает меньше ошибок и сюрпризов.

## Смотрите также

Чтобы углубиться, ознакомьтесь с этими ресурсами:

- Документация API `clojure.string` Clojure [API documentation](https://clojuredocs.org/clojure.string/replace)
- О регулярных выражениях, класс Java [Pattern class](https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)
