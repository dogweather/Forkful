---
aliases:
- /ru/rust/writing-to-standard-error/
changelog:
- 2024-01-29, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:06:25.798343-07:00
description: "\u0417\u0430\u043F\u0438\u0441\u044C \u0432 \u0441\u0442\u0430\u043D\
  \u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u043F\u043E\u0442\u043E\u043A \u043E\
  \u0448\u0438\u0431\u043E\u043A (stderr) \u043F\u043E\u0434\u0440\u0430\u0437\u0443\
  \u043C\u0435\u0432\u0430\u0435\u0442 \u0432\u044B\u0432\u043E\u0434 \u0442\u0435\
  \u043A\u0441\u0442\u0430 \u0432 \u043F\u043E\u0442\u043E\u043A \u043E\u0448\u0438\
  \u0431\u043E\u043A, \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u044B\u0439 \u043E\
  \u0442 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u043E\u0433\u043E\
  \ \u0432\u044B\u0432\u043E\u0434\u0430 (stdout). \u041F\u0440\u043E\u0433\u0440\u0430\
  \u043C\u043C\u0438\u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\
  \u0442\u043E\u2026"
lastmod: 2024-02-18 23:08:56.755694
model: gpt-4-0125-preview
summary: "\u0417\u0430\u043F\u0438\u0441\u044C \u0432 \u0441\u0442\u0430\u043D\u0434\
  \u0430\u0440\u0442\u043D\u044B\u0439 \u043F\u043E\u0442\u043E\u043A \u043E\u0448\
  \u0438\u0431\u043E\u043A (stderr) \u043F\u043E\u0434\u0440\u0430\u0437\u0443\u043C\
  \u0435\u0432\u0430\u0435\u0442 \u0432\u044B\u0432\u043E\u0434 \u0442\u0435\u043A\
  \u0441\u0442\u0430 \u0432 \u043F\u043E\u0442\u043E\u043A \u043E\u0448\u0438\u0431\
  \u043E\u043A, \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u044B\u0439 \u043E\u0442\
  \ \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u043E\u0433\u043E \u0432\
  \u044B\u0432\u043E\u0434\u0430 (stdout). \u041F\u0440\u043E\u0433\u0440\u0430\u043C\
  \u043C\u0438\u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\u0442\
  \u043E\u2026"
title: "\u0417\u0430\u043F\u0438\u0441\u044C \u0432 \u0441\u0442\u0430\u043D\u0434\
  \u0430\u0440\u0442\u043D\u044B\u0439 \u043F\u043E\u0442\u043E\u043A \u043E\u0448\
  \u0438\u0431\u043E\u043A"
---

{{< edit_this_page >}}

## Что и зачем?

Запись в стандартный поток ошибок (stderr) подразумевает вывод текста в поток ошибок, отдельный от стандартного вывода (stdout). Программисты делают это для регистрации ошибок и диагностических сообщений, чтобы не загромождать обычный вывод, который может быть перенаправлен или передан в другие программы.

## Как это делается:

Rust делает запись в stderr простой. Используйте макрос `eprintln!` для текста, так же, как `println!`, но для ошибок.

```Rust
fn main() {
    // Обычный вывод
    println!("Это обычное сообщение.");

    // Вывод ошибки
    eprintln!("Это сообщение об ошибке.");
}
```

Пример вывода:

```shell
Это обычное сообщение.
Это сообщение об ошибке.
```

Заметьте, сообщение об ошибке идет в stderr. В терминале вы не увидите разницы. Однако, если вы перенаправите stdout, stderr все равно появится в консоли.

```shell
$ cargo run > output.txt
Это сообщение об ошибке.
```

Здесь `output.txt` будет содержать только "Это обычное сообщение."

## Подробнее

Исторически разделение stdout и stderr позволяло Unix системам обрабатывать обычные и ошибочные данные по-разному. Это хорошая практика и помогает в автоматизации и регистрации сообщений.

Альтернативы записи в stderr более низкого уровня, например, использование `std::io::stderr`. Это дает больше контроля и хорошо работает для данных, не являющихся текстом.

```Rust
use std::io::{self, Write};

fn main() -> io::Result<()> {
    let stderr = &mut io::stderr();
    
    // Напрямую записать строку в stderr
    writeln!(stderr, "Ошибка: Невозможно завершить операцию")?;
    
    Ok(())
}
```

Под капотом, `eprintln!` - это макрос, обертывающий `writeln!` в stderr, что позволяет соблюдать принцип DRY (Don't Repeat Yourself - Не повторяйся).

## Смотрите также

Для дополнительной информации об обработке ошибок и регистрации сообщений:

- Rust By Example о stdio: https://doc.rust-lang.org/rust-by-example/std_misc/stdio.html
- Книга Rust об обработке ошибок: https://doc.rust-lang.org/book/ch09-00-error-handling.html
- Крейт `log` Rust для более комплексной настройки регистрации: https://crates.io/crates/log
