---
aliases:
- /ru/rust/writing-tests/
changelog:
- 2024-01-29, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:06:06.701140-07:00
description: "\u041D\u0430\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u0435\u0441\
  \u0442\u043E\u0432 \u043E\u0437\u043D\u0430\u0447\u0430\u0435\u0442 \u0441\u043E\
  \u0437\u0434\u0430\u043D\u0438\u0435 \u0444\u0440\u0430\u0433\u043C\u0435\u043D\u0442\
  \u043E\u0432 \u043A\u043E\u0434\u0430, \u043A\u043E\u0442\u043E\u0440\u044B\u0435\
  \ \u043F\u0440\u043E\u0432\u0435\u0440\u044F\u044E\u0442, \u043F\u0440\u0430\u0432\
  \u0438\u043B\u044C\u043D\u043E \u043B\u0438 \u0440\u0430\u0431\u043E\u0442\u0430\
  \u044E\u0442 \u0434\u0440\u0443\u0433\u0438\u0435 \u0447\u0430\u0441\u0442\u0438\
  \ \u043A\u043E\u0434\u0430. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\
  \u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\u0442\u043E, \u0447\
  \u0442\u043E\u0431\u044B \u0437\u0430\u0440\u0430\u043D\u0435\u0435\u2026"
lastmod: 2024-02-18 23:08:56.740182
model: gpt-4-0125-preview
summary: "\u041D\u0430\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u0435\u0441\
  \u0442\u043E\u0432 \u043E\u0437\u043D\u0430\u0447\u0430\u0435\u0442 \u0441\u043E\
  \u0437\u0434\u0430\u043D\u0438\u0435 \u0444\u0440\u0430\u0433\u043C\u0435\u043D\u0442\
  \u043E\u0432 \u043A\u043E\u0434\u0430, \u043A\u043E\u0442\u043E\u0440\u044B\u0435\
  \ \u043F\u0440\u043E\u0432\u0435\u0440\u044F\u044E\u0442, \u043F\u0440\u0430\u0432\
  \u0438\u043B\u044C\u043D\u043E \u043B\u0438 \u0440\u0430\u0431\u043E\u0442\u0430\
  \u044E\u0442 \u0434\u0440\u0443\u0433\u0438\u0435 \u0447\u0430\u0441\u0442\u0438\
  \ \u043A\u043E\u0434\u0430. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\
  \u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\u0442\u043E, \u0447\
  \u0442\u043E\u0431\u044B \u0437\u0430\u0440\u0430\u043D\u0435\u0435\u2026"
title: "\u041D\u0430\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u0435\u0441\u0442\
  \u043E\u0432"
---

{{< edit_this_page >}}

## Что и почему?

Написание тестов означает создание фрагментов кода, которые проверяют, правильно ли работают другие части кода. Программисты делают это, чтобы заранее выявлять ошибки, обеспечивать функциональность и защищаться от сбоев при внесении новых изменений.

## Как это делается:

Rust делает написание тестов простым. Давайте напишем функцию и тест для неё.

Функция:

```Rust
fn add_two(a: i32) -> i32 {
    a + 2
}
```

Тест:

```Rust
#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn it_adds_two() {
        assert_eq!(4, add_two(2));
    }
}
```

Запуск тестов с помощью `cargo test`. Ожидаемый вывод:

```plaintext
   Compiling my_crate v0.1.0 (/path/to/my_crate)
    Finished test [unoptimized + debuginfo] target(s) in 0.31 сек
     Running unittests (target/debug/deps/my_crate-abc123)

running 1 test
test tests::it_adds_two ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s
```

## Подробнее

Исторически тесты пишутся после написания кода (постфактум). Rust поощряет написание тестов одновременно с кодом или даже до его написания (разработка через тестирование, TDD). Существуют и другие формы тестирования - интеграционные тесты, тесты документации и т. д. - каждая из которых имеет свои уникальные детали реализации.

В Rust тесты обычно пишутся в том же файле или в директории `tests/`. Это могут быть модульные тесты (как пример `it_adds_two`), интеграционные тесты (в отдельных файлах) или тесты документации (встроенные в комментарии к документации). Компилятор Rust знает, что функции с `#[test]` должны быть запущены с помощью `cargo test`.

## См. также

- Книга о Rust по теме тестирования: https://doc.rust-lang.org/book/ch11-00-testing.html
- Раздел о тестировании в Rust by Example: https://doc.rust-lang.org/stable/rust-by-example/testing.html
- Рекомендации по тестированию API: https://rust-lang.github.io/api-guidelines/documentation.html#crate-provides-docs-including-rustdoc-and-tests-c-dox
