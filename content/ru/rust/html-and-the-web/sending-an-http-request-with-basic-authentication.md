---
aliases:
- /ru/rust/sending-an-http-request-with-basic-authentication/
changelog:
- 2024-01-29, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:03:14.212878-07:00
description: "\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 HTTP-\u0437\u0430\u043F\
  \u0440\u043E\u0441\u0430 \u0441 \u0431\u0430\u0437\u043E\u0432\u043E\u0439 \u0430\
  \u0443\u0442\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0435\u0439\
  \ \u043F\u043E\u0434\u0440\u0430\u0437\u0443\u043C\u0435\u0432\u0430\u0435\u0442\
  \ \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0432 \u0437\u0430\
  \u0433\u043E\u043B\u043E\u0432\u043E\u043A \u0437\u0430\u043F\u0440\u043E\u0441\u0430\
  \ \u0438\u043C\u0435\u043D\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\
  \u0442\u0435\u043B\u044F \u0438 \u043F\u0430\u0440\u043E\u043B\u044F \u0434\u043B\
  \u044F \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F\
  \ \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430\
  .\u2026"
lastmod: 2024-02-18 23:08:56.735376
model: gpt-4-0125-preview
summary: "\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 HTTP-\u0437\u0430\u043F\
  \u0440\u043E\u0441\u0430 \u0441 \u0431\u0430\u0437\u043E\u0432\u043E\u0439 \u0430\
  \u0443\u0442\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0435\u0439\
  \ \u043F\u043E\u0434\u0440\u0430\u0437\u0443\u043C\u0435\u0432\u0430\u0435\u0442\
  \ \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0432 \u0437\u0430\
  \u0433\u043E\u043B\u043E\u0432\u043E\u043A \u0437\u0430\u043F\u0440\u043E\u0441\u0430\
  \ \u0438\u043C\u0435\u043D\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\
  \u0442\u0435\u043B\u044F \u0438 \u043F\u0430\u0440\u043E\u043B\u044F \u0434\u043B\
  \u044F \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F\
  \ \u0432\u0430\u0448\u0435\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430\
  .\u2026"
title: "\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 HTTP-\u0437\u0430\u043F\u0440\
  \u043E\u0441\u0430 \u0441 \u0431\u0430\u0437\u043E\u0432\u043E\u0439 \u0430\u0443\
  \u0442\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0435\u0439"
---

{{< edit_this_page >}}

## Что и Почему?

Отправка HTTP-запроса с базовой аутентификацией подразумевает добавление в заголовок запроса имени пользователя и пароля для подтверждения вашего доступа. Это делается, когда сервисам необходимо убедиться, что доступ пытаетесь получить именно вы, а не какой-то Joe Schmoe, пытающийся получить доступ к чему-то.

## Как это сделать:

Сначала добавьте необходимые зависимости в файл `Cargo.toml`:

```toml
[dependencies]
reqwest = "0.11"
base64 = "0.13"
```

Теперь вот код на Rust для отправки GET-запроса с базовой аутентификацией:

```rust
use reqwest::header::{Authorization, Basic};
use std::error::Error;

#[tokio::main]
async fn main() -> Result<(), Box<dyn Error>> {
    let client = reqwest::Client::new();
    let user = "Aladdin";
    let password = "open sesame";
    
    let auth = Basic {
        username: user.into(),
        password: Some(password.into()),
    };
    
    let response = client
        .get("http://example.com/secrets")
        .header(Authorization(auth))
        .send()
        .await?;
    
    let content = response.text().await?;
    println!("Ответ: {}", content);
    
    Ok(())
}
```

Если всё правильно, то будут напечатаны секреты. Вы поняли основную идею.

## Подробнее

До появления `reqwest` люди мучились с `curl` на Rust. Это как предпочесть ручную пилу электрической. Базовая аутентификация, хоть и кажется простой, не является крепостью типа Форт-Нокс. Это всего лишь Base64 от "имя пользователя:пароль", без шифрования, поэтому HTTPS является обязательным.

Альтернативы? OAuth 2.0 значительно опережает базовую аутентификацию, предлагая токены вместо конкретных учетных данных. Тем не менее, это сложнее. Есть также аутентификация Bearer, которая держит токены как секретный рукопожатие.

Под капотом, `reqwest` является высокоуровневым HTTP-клиентом, хорошо работающим с асинхронными возможностями Rust. Структура 'Basic' создает заголовок, 'Authorization' вставляет его, и вуаля, вы стучитесь в дверь сервера с секретным шепотом.

## Смотрите также

Для большего количества знаний и магии:

- документация reqwest: [https://docs.rs/reqwest](https://docs.rs/reqwest)
- Понимание базовой аутентификации HTTP: [https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication)
- Асинхронное программирование на Rust: [https://rust-lang.github.io/async-book/](https://rust-lang.github.io/async-book/)
- документация крейта base64 на Rust: [https://docs.rs/base64](https://docs.rs/base64)
