---
aliases:
- /ru/fish-shell/editing-files-in-place-with-cli-one-liners/
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-28 23:58:09.483883-07:00
description: "\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\
  \u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432 \"\u043D\u0430 \u043C\u0435\u0441\
  \u0442\u0435\" \u0441 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\
  \u043D\u0438\u0435\u043C \u043E\u0434\u043D\u043E\u0441\u0442\u0440\u043E\u0447\u043D\
  \u044B\u0445 \u043A\u043E\u043C\u0430\u043D\u0434 CLI \u043F\u0440\u0435\u0434\u043F\
  \u043E\u043B\u0430\u0433\u0430\u0435\u0442 \u0432\u043D\u0435\u0441\u0435\u043D\u0438\
  \u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439 \u043D\u0435\u043F\
  \u043E\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043D\u043D\u043E \u0432\
  \ \u0444\u0430\u0439\u043B\u044B \u0438\u0437 \u043A\u043E\u043C\u0430\u043D\u0434\
  \u043D\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\u0438, \u0431\u0435\u0437\u2026"
lastmod: 2024-02-18 23:08:57.508070
model: gpt-4-0125-preview
summary: "\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\
  \u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432 \"\u043D\u0430 \u043C\u0435\u0441\
  \u0442\u0435\" \u0441 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\
  \u043D\u0438\u0435\u043C \u043E\u0434\u043D\u043E\u0441\u0442\u0440\u043E\u0447\u043D\
  \u044B\u0445 \u043A\u043E\u043C\u0430\u043D\u0434 CLI \u043F\u0440\u0435\u0434\u043F\
  \u043E\u043B\u0430\u0433\u0430\u0435\u0442 \u0432\u043D\u0435\u0441\u0435\u043D\u0438\
  \u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439 \u043D\u0435\u043F\
  \u043E\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043D\u043D\u043E \u0432\
  \ \u0444\u0430\u0439\u043B\u044B \u0438\u0437 \u043A\u043E\u043C\u0430\u043D\u0434\
  \u043D\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\u0438, \u0431\u0435\u0437\u2026"
title: "\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\
  \u0435 \u0444\u0430\u0439\u043B\u043E\u0432 \u043D\u0430 \u043C\u0435\u0441\u0442\
  \u0435 \u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E \u043E\u0434\u043D\u043E\
  \u0441\u0442\u0440\u043E\u0447\u043D\u0438\u043A\u043E\u0432 CLI"
---

{{< edit_this_page >}}

## Что и Зачем?

Редактирование файлов "на месте" с использованием однострочных команд CLI предполагает внесение изменений непосредственно в файлы из командной строки, без открытия их в текстовом редакторе. Программисты делают это для экономии времени и автоматизации повторяющихся задач редактирования, делая свой рабочий процесс более гладким и эффективным.

## Как:

Fish Shell, известный своими удобными функциями и мощными возможностями скриптования, предлагает несколько способов редактирования файлов "на месте". Однако, в отличие от некоторых других оболочек, Fish не имеет встроенного механизма для редактирования "на месте" (например, `sed -i` в Bash). Но не беспокойтесь, вы все равно можете достичь этого с небольшим творческим подходом и помощью внешних инструментов, таких как `sed` и `awk`.

### Использование `sed` для простых замен
Чтобы заменить все вхождения "hello" на "world" в `file.txt`, вы можете использовать:
```Fish Shell
sed -i '' 's/hello/world/g' file.txt
```

### Применение нескольких команд `sed`
Если вам нужно выполнить несколько замен, вы можете объединить их так:
```Fish Shell
sed -i '' -e 's/fish/bass/g' -e 's/rainbow/trout/g' file.txt
```

### Использование `awk` для более сложных операций
Для операций, слишком сложных для `sed`, `awk` может быть вашим инструментом выбора. Вот как удвоить число на каждой строке:
```Fish Shell
awk '{print $1 * 2}' file.txt > temp && mv temp file.txt
```

### Примечание об обработке ошибок
Помните, при использовании этих инструментов из Fish, захват ошибок и понимание их сообщений имеет решающее значение. Используйте надежную обработку ошибок Fish для повышения надежности ваших скриптов.

## Глубокое Погружение

Исторически редактирование файлов "на месте" было важной частью программирования в Unix и Linux, предлагая эффективный способ выполнения быстрых правок без ручного открытия файлов. Инструменты вроде `sed` и `awk` являются почитаемыми утилитами, которые существуют с ранних дней Unix и стали незаменимыми для задач обработки текста.

Fish Shell, будучи более современным и предлагая улучшения в удобстве использования и скриптовании, отсутствует встроенное редактирование "на месте", в первую очередь из-за его дизайн-философии, сосредоточенной на интерактивности и дружелюбности к пользователю. Отсутствие встроенной команды для редактирования "на месте" в Fish подчеркивает важность внешних инструментов в экосистемах, подобных Unix.

Альтернативы для редактирования "на месте" в Fish включают использование временных файлов или использование однострочников на Perl или Python, которые могут предложить большую гибкость или читаемость для сложных задач.

Например, используя Perl:
```Fish Shell
perl -pi -e 's/find/replace/g' file.txt
```
Или Python:
```Fish Shell
python -c "import re, sys; [sys.stdout.write(re.sub('pattern', 'replacement', line)) for line in sys.stdin]" < file.txt > temp && mv temp file.txt
```

С точки зрения реализации, когда вы выполняете редактирование "на месте", под капотом эти инструменты обычно создают временный файл, записывают изменения туда, а затем заменяют оригинальный файл измененной версией. Этот подход гарантирует, что процесс редактирования файла не повредит данные или не потеряет их, если во время операции произойдет ошибка.

Понимание этих инструментов и методов позволяет программистам Fish Shell эффективно включать редактирование "на месте" в свои скрипты, преодолевая разрыв между дружелюбными к пользователю функциями Fish и сырой мощью традиционных утилит обработки текста Unix.
