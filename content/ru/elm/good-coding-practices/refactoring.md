---
aliases:
- /ru/elm/refactoring/
changelog:
- 2024-01-29, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:01:22.150820-07:00
description: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 -\
  \ \u044D\u0442\u043E, \u043F\u043E \u0441\u0443\u0442\u0438, \u0432\u0435\u0441\u0435\
  \u043D\u043D\u044F\u044F \u0443\u0431\u043E\u0440\u043A\u0430 \u0432\u0430\u0448\
  \u0435\u0439 \u043A\u043E\u0434\u043E\u0432\u043E\u0439 \u0431\u0430\u0437\u044B\
  \ - \u044D\u0442\u043E \u043F\u0435\u0440\u0435\u0441\u0442\u0440\u043E\u0439\u043A\
  \u0430 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u0433\u043E\
  \ \u043A\u043E\u0434\u0430 \u0431\u0435\u0437 \u0438\u0437\u043C\u0435\u043D\u0435\
  \u043D\u0438\u044F \u0435\u0433\u043E \u0432\u043D\u0435\u0448\u043D\u0435\u0433\
  \u043E \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F. \u041F\u0440\u043E\
  \u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442\u044B\u2026"
lastmod: 2024-02-18 23:08:56.903781
model: gpt-4-0125-preview
summary: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 - \u044D\
  \u0442\u043E, \u043F\u043E \u0441\u0443\u0442\u0438, \u0432\u0435\u0441\u0435\u043D\
  \u043D\u044F\u044F \u0443\u0431\u043E\u0440\u043A\u0430 \u0432\u0430\u0448\u0435\
  \u0439 \u043A\u043E\u0434\u043E\u0432\u043E\u0439 \u0431\u0430\u0437\u044B - \u044D\
  \u0442\u043E \u043F\u0435\u0440\u0435\u0441\u0442\u0440\u043E\u0439\u043A\u0430\
  \ \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u0433\u043E\
  \ \u043A\u043E\u0434\u0430 \u0431\u0435\u0437 \u0438\u0437\u043C\u0435\u043D\u0435\
  \u043D\u0438\u044F \u0435\u0433\u043E \u0432\u043D\u0435\u0448\u043D\u0435\u0433\
  \u043E \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F. \u041F\u0440\u043E\
  \u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442\u044B\u2026"
title: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433"
---

{{< edit_this_page >}}

## Что и почему?
Рефакторинг - это, по сути, весенняя уборка вашей кодовой базы - это перестройка существующего кода без изменения его внешнего поведения. Программисты делают это, чтобы сделать код более читаемым, уменьшить сложность, улучшить поддерживаемость и облегчить расширение.

## Как это сделать:
Представьте, что у вас есть функция на Elm, которая делает слишком много, например, смешивает логику пользовательского интерфейса с обновлениями состояния. Это идеальный кандидат для рефакторинга. Изначально:

```Elm
updateAndFormat : String -> Model -> (Model, Cmd Msg)
updateAndFormat input model =
    let
        updatedModel = { model | userInput = input }
    in
    if String.length input > 5 then
        ( updatedModel, Cmd.none )
    else
        ( model, Cmd.none )
```

После рефакторинга мы разделяем обязанности, вынося логику в разные функции:

```Elm
-- Логика обновления теперь отдельно
updateUserInput : String -> Model -> Model
updateUserInput input model = 
    { model | userInput = input }

-- Логика форматирования (представления) также отдельно
formatUserInput : Model -> (Model, Cmd Msg)
formatUserInput model =
    if String.length model.userInput > 5 then
        ( model, Cmd.none )
    else
        ( { model | userInput = "" }, Cmd.none ) -- Очистка ввода, если он слишком короткий, как пример правила.

-- Функция обновления теперь использует вспомогательные функции
updateAndFormat : String -> Model -> (Model, Cmd Msg)
updateAndFormat input model =
    model
    |> updateUserInput input
    |> formatUserInput
```
С этими изменениями вы получаете четкое разделение, и каждая функция становится легче для понимания и тестирования.

## Глубокое погружение
Рефакторинг как формальная практика может быть отслежен до ранних дней программирования, когда стоимость изменения кода уже признавалась критически важным аспектом процесса разработки. В частности, книга Мартина Фаулера "Рефакторинг: Улучшение дизайна существующего кода", опубликованная в конце 1990-х годов, действительно задала тон для рефакторинга с структурированным подходом и каталогом "запахов кода" для определения возможностей для рефакторинга.

В контексте Elm рефакторинг использует сильные стороны языка, такие как его сильная система типов, которая способствует уверенности в процессе. Альтернативы ручному рефакторингу могут включать в себя инструменты для автоматизированных преобразований кода, но инструментарий Elm в этой области все еще развивается по сравнению с некоторыми более старыми языками. Детали реализации часто касаются общих рефакторингов, таких как извлечение функций, переименование и упрощение условных выражений. Компилятор Elm - ключевой союзник в рефакторинге, так как он не позволит вам уйти далеко - он кричит, когда что-то не так, гарантируя, что ваш отрефакторенный код по-прежнему работает.

## Смотрите также
- ["Рефакторинг: Улучшение дизайна существующего кода" Мартина Фаулера](https://martinfowler.com/books/refactoring.html)
- [Elm Discourse - Темы о рефакторинге](https://discourse.elm-lang.org/search?q=refactoring)
