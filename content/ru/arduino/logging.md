---
title:                "Журналирование"
aliases:
- ru/arduino/logging.md
date:                  2024-01-29T00:00:25.965828-07:00
model:                 gpt-4-0125-preview
simple_title:         "Журналирование"

tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/arduino/logging.md"
changelog:
  - 2024-01-28, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и Почему?
"Логирование" - это ведение записей о событиях, транзакциях или действиях, происходящих со временем в системе. Программисты используют его для отладки, мониторинга состояния системы, сбора статистики или даже аудита использования, что делает его незаменимой практикой для поддержания и понимания поведения их кода в различных условиях.

## Как сделать:
Arduino не поставляется с встроенной библиотекой логирования, как некоторые другие среды, но вы можете реализовать базовое логирование в консоль Serial с минимальными усилиями. Вот быстрый пример, чтобы начать:

```arduino
void setup() {
  // Начинаем серийное общение с заданной скоростью передачи
  Serial.begin(9600);

  // Ожидание подключения серийного порта - необходимо только на некоторых платах
  while (!Serial) {
    ; // ожидаем подключения серийного порта. Необходимо для native USB
  }

  // Логируем информационное сообщение, указывающее, что процесс настройки завершен
  Serial.println("Setup complete!");
}

void loop() {
  // Простой логгер, который выводит время работы каждую секунду
  static unsigned long lastLogTime = 0;
  unsigned long currentMillis = millis();

  if (currentMillis - lastLogTime >= 1000) {
    lastLogTime = currentMillis;
    Serial.print("Uptime (ms): ");
    Serial.println(currentMillis);

    // Здесь вы также можете добавить логи ошибок, предупреждений или другой информации.
  }
  
  // Остальная логика вашей программы здесь...
}
```

Пример выходных данных Serial:
```
Setup complete!
Uptime (ms): 1000
Uptime (ms): 2000
Uptime (ms): 3000
...
```

## Глубокое Погружение:
Исторически, логирование на микроконтроллерах не было таким прямолинейным, как на полноценной операционной системе. Ограниченные ресурсы означали, что каждый байт имел значение, и разработчикам приходилось быть осторожными, чтобы не перегрузить систему. С появлением более мощных плат и упрощением процесса платформой Arduino, логирование стало более доступным.

Хотя код выше демонстрирует логирование через интерфейс Serial, другие методы включают запись на SD-карту, отправку данных через сеть на удаленный сервер или даже вывод на небольшой ЖК-дисплей.

Реализация системы логирования влечет за собой такие рассмотрения, как ротация, уровень серьезности (info, debug, warning, error) и влияние на производительность. На Arduino вам, возможно, придется учитывать ограничения памяти при логировании сложных структур данных. Для удаленного логирования также важна безопасность передаваемых логов.

Существуют более сложные решения вне мира Arduino, такие как Syslog, широко принятый стандарт логирования, но вы можете интегрировать сторонние библиотеки, которые предлагают аналогичные функции с различной степенью сложности и требований к ресурсам.

## Смотрите также:
- [Справочник по `Serial` Arduino](https://www.arduino.cc/reference/en/language/functions/communication/serial/)
- [Логирование на SD-карту с Arduino](https://www.arduino.cc/en/Tutorial/LibraryExamples/Datalogger)
- [Щиток для логирования данных от SparkFun](https://www.sparkfun.com/products/13712)
- [TinyWeb: Практический пример удаленного логирования с Arduino](https://www.arduino.cc/en/Tutorial/WebClientRepeating)
