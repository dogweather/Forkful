---
changelog:
- 2024-01-29, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:02:00.387141-07:00
description: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 -\
  \ \u044D\u0442\u043E \u043F\u0440\u043E\u0446\u0435\u0441\u0441 \u0440\u0435\u0441\
  \u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\
  \u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u0433\u043E \u043A\u043E\
  \u043C\u043F\u044C\u044E\u0442\u0435\u0440\u043D\u043E\u0433\u043E \u043A\u043E\u0434\
  \u0430 \u0431\u0435\u0437 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F\
  \ \u0435\u0433\u043E \u0432\u043D\u0435\u0448\u043D\u0435\u0433\u043E \u043F\u043E\
  \u0432\u0435\u0434\u0435\u043D\u0438\u044F, \u0446\u0435\u043B\u044C \u043A\u043E\
  \u0442\u043E\u0440\u043E\u0433\u043E - \u0443\u043B\u0443\u0447\u0448\u0438\u0442\
  \u044C\u2026"
lastmod: '2024-03-13T22:44:45.467389-06:00'
model: gpt-4-0125-preview
summary: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 - \u044D\
  \u0442\u043E \u043F\u0440\u043E\u0446\u0435\u0441\u0441 \u0440\u0435\u0441\u0442\
  \u0440\u0443\u043A\u0442\u0443\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u0443\
  \u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u0433\u043E \u043A\u043E\u043C\
  \u043F\u044C\u044E\u0442\u0435\u0440\u043D\u043E\u0433\u043E \u043A\u043E\u0434\u0430\
  \ \u0431\u0435\u0437 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0435\
  \u0433\u043E \u0432\u043D\u0435\u0448\u043D\u0435\u0433\u043E \u043F\u043E\u0432\
  \u0435\u0434\u0435\u043D\u0438\u044F, \u0446\u0435\u043B\u044C \u043A\u043E\u0442\
  \u043E\u0440\u043E\u0433\u043E - \u0443\u043B\u0443\u0447\u0448\u0438\u0442\u044C\
  \ \u043D\u0435\u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u044C\
  \u043D\u044B\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044B \u043F\u0440\
  \u043E\u0433\u0440\u0430\u043C\u043C\u043D\u043E\u0433\u043E \u043E\u0431\u0435\u0441\
  \u043F\u0435\u0447\u0435\u043D\u0438\u044F."
title: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433"
weight: 19
---

## Как это сделать:
В PowerShell отсутствует встроенный специализированный инструмент для рефакторинга, но вы все равно можете очистить свой код для улучшения читаемости и производительности. Рассмотрим функцию, которая делает слишком много, и как мы могли бы рефакторить ее для ясности:

```PowerShell
function Get-InventoryData {
    # Исходная функция, объединяющая получение данных и их форматирование
    $data = Get-Content -Path 'C:\inventory-list.txt'
    $inventoryData = $data | ForEach-Object {
        $fields = $_ -split ','
        [PSCustomObject]@{
            ItemID = $fields[0]
            Name   = $fields[1]
            Count  = $fields[2]
            Price  = $fields[3]
        }
    }
    $inventoryData | Format-Table -AutoSize
}

# Рефакторинг на отдельные функции
function Import-InventoryData {
    param($Path)
    Get-Content -Path $Path | ForEach-Object {
        $fields = $_ -split ','
        [PSCustomObject]@{
            ItemID = $fields[0]
            Name   = $fields[1]
            Count  = $fields[2]
            Price  = $fields[3]
        }
    }
}

function Format-InventoryData {
    param($Data)
    $Data | Format-Table -AutoSize
}

# Использование
$inventory = Import-InventoryData -Path 'C:\inventory-list.txt'
Format-InventoryData -Data $inventory
```

Пример вывода:

```
ItemID Name            Count Price
------ ----            ----- -----
1001   Widget Type A   50    9.99
1002   Gadget Type B   20    14.99
```

## Глубже
Рефакторинг в программировании имеет корни, уходящие в самые ранние дни разработки программного обеспечения, хотя как практика он был формализован в 1990-х годах. Книга Мартина Фаулера "Рефакторинг: Улучшение существующего кода" является одной из фундаментальных работ по этой теме, подчеркивающей важность рефакторинга для достижения чистого кода.

Хотя в PowerShell не предусмотрены специальные инструменты для рефакторинга, как в некоторых интегрированных средах разработки (IDE) для других языков (таких как Eclipse или Visual Studio), все же можно практиковать хорошие принципы рефакторинга вручную. Главное помнить, что рефакторинг - это не просто изменение кода ради изменений, а совершение целенаправленных, сохраняющих поведение модификаций, которые улучшают структуру и дизайн кода.

Альтернативы ручному рефакторингу в PowerShell включают использование IDE, поддерживающих этот язык, таких как Visual Studio Code с расширением PowerShell, которое предлагает функции, такие как форматирование кода и базовые возможности рефакторинга. Для более значительного рефакторинга вы можете рассмотреть использование тестов Pester для обеспечения того, чтобы изменения не затронули функциональность.

Кроме того, реализация рефакторинга может включать в себя более системные изменения, такие как модуляризация, когда код разделяется на переиспользуемые модули или функции, улучшающие соблюдение принципа DRY (Don't Repeat Yourself). Другие распространенные техники рефакторинга включают переименование для ясности, удаление дубликатов кода и уменьшение сложности условной логики.

## Смотрите также
Для более глубокого изучения вот некоторые ресурсы:

- Книга Мартина Фаулера о рефакторинге: [_Рефакторинг: Улучшение существующего кода_](https://martinfowler.com/books/refactoring.html)
- Тестирование рефакторинга кода с помощью Pester: [Фреймворк тестирования Pester](https://pester.dev/)
- Лучшие практики PowerShell: [Руководство по лучшим практикам и стилю PowerShell](https://poshcode.gitbooks.io/powershell-practice-and-style/)
