---
changelog:
- 2024-02-03, gpt-4-0125-preview, translated from English
date: 2024-02-03 18:13:59.801583-07:00
description: "YAML, \u0447\u0442\u043E \u043E\u0437\u043D\u0430\u0447\u0430\u0435\u0442\
  \ \"YAML Ain't Markup Language\" (YAML \u2014 \u044D\u0442\u043E \u043D\u0435 \u044F\
  \u0437\u044B\u043A \u0440\u0430\u0437\u043C\u0435\u0442\u043A\u0438), \u043F\u0440\
  \u0435\u0434\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442 \u0441\u043E\u0431\u043E\
  \u0439 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442 \u0441\u0435\u0440\u0438\
  \u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u0430\u043D\u043D\u044B\u0445\
  , \u043F\u0440\u0438\u0433\u043E\u0434\u043D\u044B\u0439 \u0434\u043B\u044F \u0447\
  \u0442\u0435\u043D\u0438\u044F\u2026"
lastmod: '2024-03-13T22:44:45.954614-06:00'
model: gpt-4-0125-preview
summary: "YAML, \u0447\u0442\u043E \u043E\u0437\u043D\u0430\u0447\u0430\u0435\u0442\
  \ \"YAML Ain't Markup Language\" (YAML \u2014 \u044D\u0442\u043E \u043D\u0435 \u044F\
  \u0437\u044B\u043A \u0440\u0430\u0437\u043C\u0435\u0442\u043A\u0438), \u043F\u0440\
  \u0435\u0434\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442 \u0441\u043E\u0431\u043E\
  \u0439 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442 \u0441\u0435\u0440\u0438\
  \u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u0430\u043D\u043D\u044B\u0445\
  , \u043F\u0440\u0438\u0433\u043E\u0434\u043D\u044B\u0439 \u0434\u043B\u044F \u0447\
  \u0442\u0435\u043D\u0438\u044F \u0447\u0435\u043B\u043E\u0432\u0435\u043A\u043E\u043C\
  , \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u043C\u043E\u0436\u0435\u0442 \u0438\
  \u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0432\
  \ \u0440\u0430\u0437\u043B\u0438\u0447\u043D\u044B\u0445 \u043F\u0440\u0438\u043B\
  \u043E\u0436\u0435\u043D\u0438\u044F\u0445, \u043E\u0442 \u0444\u0430\u0439\u043B\
  \u043E\u0432 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438\
  \ \u0434\u043E \u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0434\u0430\u043D\
  \u043D\u044B\u0445."
title: "\u0420\u0430\u0431\u043E\u0442\u0430 \u0441 YAML"
weight: 41
---

## Как:
Для работы с YAML в C требуется библиотека, поскольку стандартная библиотека C не предоставляет прямой поддержки для разбора или сериализации YAML. Одной из наиболее популярных библиотек YAML для C является `libyaml`, которая предлагает как низкоуровневые, так и высокоуровневые интерфейсы для разбора и генерации YAML. Ниже приведен пример того, как разобрать простой YAML-файл, используя `libyaml`:

**Во-первых**, вам нужно установить библиотеку `libyaml`. Если вы используете систему, подобную Unix, обычно ее можно установить через менеджер пакетов. Например, в Ubuntu:

```bash
sudo apt-get install libyaml-dev
```

**Затем**, рассмотрим простой YAML-файл с именем `config.yaml`:

```yaml
name: John Doe
age: 29
married: false
```

**Вот** простой пример того, как разобрать этот YAML-файл в C:

```c
#include <yaml.h>
#include <stdio.h>
#include <stdlib.h>

void process_yaml_file(const char *filename) {
    FILE *fh = fopen(filename, "rb");
    yaml_parser_t parser;
    yaml_event_t event;

    if (!yaml_parser_initialize(&parser))
        fputs("Не удалось инициализировать парсер YAML!\n", stderr);

    if (fh == NULL)
        fputs("Не удалось открыть файл!\n", stderr);

    yaml_parser_set_input_file(&parser, fh);

    while (1) {
        if (!yaml_parser_parse(&parser, &event))
            break;

        if (event.type == YAML_SCALAR_EVENT) {
            printf("Значение: %s\n", event.data.scalar.value);
        }

        if (event.type == YAML_STREAM_END_EVENT)
            break;

        yaml_event_delete(&event);
    }

    yaml_parser_delete(&parser);
    fclose(fh);
}

int main() {
    process_yaml_file("config.yaml");
    return 0;
}
```

Эта простая программа открывает YAML-файл, инициализирует парсер YAML и читает файл, выводя скалярные значения (в данном примере, поля нашего простого YAML). Обратите внимание, что проверка ошибок в этом простом примере минимальна и должна быть более надежной в производственном коде.

Запуск программы с нашим `config.yaml` выведет:

```plaintext
Значение: John Doe
Значение: 29
Значение: false
```

## Погружение в детали
YAML был впервые выпущен в 2001 году и разработан, чтобы быть более читабельным и удобным для пользователя, чем другие форматы сериализации данных, такие как XML или JSON, заимствуя из нескольких языков, таких как C, Perl и Python, для своей философии дизайна. Несмотря на свои преимущества в читабельности и легкости модификации человеком, YAML может быть сложен для программного разбора из-за своей зависимости от отступов и его обширного набора функций, включая ссылки и настраиваемые типы.

Хотя `libyaml` предоставляет надежный низкоуровневый доступ к разбору и генерации YAML в C, он может быть громоздким для простых задач из-за его многословного API. По этим причинам некоторые программисты предпочитают использовать более высокоуровневые библиотеки или даже другие форматы сериализации данных, такие как JSON, когда работают на C, особенно когда приоритетом является быстрый разбор с минимальным объемом кода. Тем не менее, YAML остается популярным выбором для файлов конфигурации и ситуаций, когда важна читабельность для человека. Альтернативы, такие как TinyYAML или встраивание высокоуровневого интерпретатора (например, встраивание Python или Lua), могут обеспечить больше удобства для конкретных приложений, балансируя между удобством использования и потребностями в производительности.
