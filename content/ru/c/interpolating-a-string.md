---
title:                "Интерполяция строки"
date:                  2024-01-28T23:59:14.523927-07:00
model:                 gpt-4-0125-preview
simple_title:         "Интерполяция строки"

tag:                  "Strings"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/c/interpolating-a-string.md"
changelog:
  - 2024-01-28, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и почему?

Интерполяция строк позволяет нам вставлять переменные напрямую в строки. Это удобно для динамического создания текста, например, персонализированных сообщений или отформатированных данных.

## Как это сделать:

В Си нет встроенной интерполяции строк, но мы можем использовать `sprintf` или `snprintf`. Вот как:

```c
#include <stdio.h>

int main() {
    char name[] = "Alex";
    int age = 29;
    char message[50];

    snprintf(message, sizeof(message), "Привет, меня зовут %s, и мне %d лет.", name, age);
    printf("%s\n", message);  // Пример вывода: Привет, меня зовут Alex, и мне 29 лет.

    return 0;
}
```

## Углубляемся:

В Си всегда нужно было работать со строками вручную. Интерполяция не является прямой функцией – вместо этого мы используем заполнители и спецификаторы форматов, такие как `%s` для строк или `%d` для цифр внутри функций вроде `printf` или `sprintf`.

Исторически, разработчики на других языках были избалованы возможностями интерполяции. В C#, вы бы просто написали `var message = $"Привет, {name}!";`. Swift и Ruby также имеют свои "фишки".

Вернувшись в наш Си-двор, спецификаторы форматов выполняют всю главную работу. Помните, что `sprintf` может быть рискованным, если вы ошибётесь с размером буфера, и вы можете случайно переполнить его (`snprintf` безопаснее из-за ограничения буфера). Кроме того, ручное управление этим означает больше контроля - любимый принцип в этике Си.

Однако существует не один способ ошкурить кошку: сторонние библиотеки, такие как GLib, представляют более приятные утилиты для работы со строками. Функции вроде `g_strdup_printf` действуют аналогично `sprintf`, но обрабатывают выделение памяти за вас.

Вариативные макросы и функции также могут симулировать интерполяцию, но это продвинутый ход, требующий хорошего понимания макросов и типа `va_list` из `<stdarg.h>`.

## Смотрите также:

- Программные языки ISO/IEC — C: https://www.iso.org/standard/74528.html
- Стандарт C11 (N1570): http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf
- Документация GNU C Library (glibc) по `printf`: https://www.gnu.org/software/libc/manual/html_node/Formatted-Output-Functions.html
- Утилиты работы со строками GLib: https://developer.gnome.org/glib/stable/glib-Strings.html
