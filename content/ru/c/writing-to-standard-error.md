---
title:                "Запись в стандартный поток ошибок"
aliases:
- ru/c/writing-to-standard-error.md
date:                  2024-02-03T18:15:25.822798-07:00
model:                 gpt-4-0125-preview
simple_title:         "Запись в стандартный поток ошибок"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/c/writing-to-standard-error.md"
changelog:
  - 2024-02-03, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и зачем?

Вывод на стандартный поток ошибок в C предполагает направление сообщений об ошибках и диагностической информации в поток, отдельный от основного вывода программы. Программисты делают это для того, чтобы отделить сообщения об ошибках от стандартного вывода, что делает их более читаемыми и удобными для обработки отдельно, особенно при отладке или ведении журнала выполнения программ.

## Как это сделать:

В C для вывода сообщений об ошибках используется поток `stderr`. В отличие от записи в стандартный вывод с помощью `printf`, для записи в `stderr` можно использовать `fprintf` или `fputs`. Вот как это можно сделать:

```c
#include <stdio.h>

int main() {
    fprintf(stderr, "Это сообщение об ошибке.\n");

    fputs("Это еще одно сообщение об ошибке.\n", stderr);
    
    return 0;
}
```

Пример вывода (в stderr):
```
Это сообщение об ошибке.
Это еще одно сообщение об ошибке.
```

Важно отметить, что, хотя вывод выглядит аналогично `stdout` в консоли, когда используется перенаправление в терминале, различие становится очевидным:

```sh
$ ./your_program > output.txt
```

Эта команда перенаправляет только стандартный вывод в `output.txt`, в то время как сообщения об ошибках все еще будут появляться на экране.

## Погружение

Различие между `stdout` и `stderr` в системах на базе Unix восходит к ранним дням C и Unix. Это разделение позволяет более надежно обрабатывать ошибки и вести журнал, поскольку оно дает программистам возможность перенаправлять сообщения об ошибках независимо от стандартного вывода программы. В то время как `stderr` по умолчанию не буферизируется, чтобы обеспечить немедленный вывод сообщений об ошибках, что помогает в отладке сбоев и других критических проблем, `stdout`, как правило, буферизируется, что означает, что его вывод может задерживаться до тех пор, пока буфер не будет очищен (например, по завершении программы или вручную).

В современных приложениях вывод на `stderr` по-прежнему актуален, особенно для инструментов командной строки и серверных приложений, где важно различать обычные сообщения журнала и ошибки. Однако для более сложной обработки ошибок, особенно в графических пользовательских интерфейсах или когда требуются более сложные механизмы ведения журнала, программисты могут использовать специализированные библиотеки ведения журнала, которые обеспечивают больший контроль над форматированием сообщений, направлениями (например, файлы, сеть) и уровнями серьезности (информация, предупреждение, ошибка и т.д.).

Хотя `stderr` предоставляет фундаментальный механизм для сообщения об ошибках в C, эволюция практик программирования и наличие продвинутых фреймворков ведения журнала означают, что часто это лишь отправная точка для современных стратегий обработки ошибок.
