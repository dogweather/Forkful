---
title:                "Рефакторинг"
date:                  2024-01-29T00:03:22.379769-07:00
model:                 gpt-4-0125-preview
simple_title:         "Рефакторинг"

tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/c/refactoring.md"
changelog:
  - 2024-01-29, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и Почему?
Рефакторинг — это процесс перестроения существующего компьютерного кода без изменения его внешнего поведения. Программисты делают это для повышения читаемости, уменьшения сложности или для того, чтобы код стал более поддерживаемым и масштабируемым, что может сэкономить кучу времени и избавить от головной боли в будущем.

## Как это сделать:
Давайте улучшим некоторый код. Представьте, что у вас есть функция, которая вычисляет среднее значение целых чисел в массиве. На первый взгляд, это немного запутанно.

**До рефакторинга:**
```C
#include <stdio.h>

double calculateStuff(int numbers[], int size) {
    int sum = 0;
    double average;
    for(int i = 0; i < size; sum += numbers[i++]); // Суммирование в условии цикла for, ай-ай!
    average = (double)sum / size;
    return average;
}

int main() {
    int array[] = {23, 42, 57, 16, 5, 102};
    int length = sizeof(array) / sizeof(array[0]);
    printf("Среднее: %f\n", calculateStuff(array, length));

    return 0;
}
```

**После рефакторинга:**
```C
#include <stdio.h>

int calculateSum(const int numbers[], int size) {
    int sum = 0;
    for (int i = 0; i < size; ++i) {
        sum += numbers[i];
    }
    return sum;
}

double calculateAverage(const int numbers[], int size) {
    int sum = calculateSum(numbers, size);
    return (double)sum / size;
}

int main() {
    int array[] = {23, 42, 57, 16, 5, 102};
    int length = sizeof(array) / sizeof(array[0]);
    printf("Среднее: %f\n", calculateAverage(array, length));
    return 0;
}
```
Даже на этом простом примере вы можете видеть, как разделение функции делает код чище и более поддерживаемым. Теперь у каждой функции одна ответственность – ключевой принцип в чистом коде.

## Глубокое погружение
Термин "рефакторинг" получил популярность в конце 90-х, особенно после публикации книги Мартина Фаулера "Рефакторинг: Улучшение проекта существующего кода". Рефакторинг не подразумевает исправление ошибок или добавление новых функций, а скорее улучшение структуры кода.

Существует множество классных инструментов и сред разработки (IDE), которые помогают автоматизировать процесс, как CLion для C и C++, но понимание того, что происходит под капотом, остается критически важным.

Альтернативы рефакторингу могут включать переписывание кода с нуля (рискованно и часто ненужно) или жизнь с техническим долгом (что может быть дороже в долгосрочной перспективе). Детали реализации варьируются в зависимости от проекта, но общие подходы к рефакторингу включают переименование переменных для ясности, разделение больших функций на меньшие, и замену магических чисел именованными константами.

Также, принципы, такие как DRY (Don't Repeat Yourself) и SOLID, могут направлять ваше путешествие рефакторинга, стремясь к созданию базы кода, которая проще в тестировании, понимании и сотрудничестве.

## Смотрите также
Чтобы глубже погрузиться в мир рефакторинга, посмотрите:

- Домашняя страница Мартина Фаулера: https://martinfowler.com/ с сокровищницей статей и ресурсов по рефакторингу и проектированию программного обеспечения.
- Refactoring.com: https://refactoring.com/ предоставляет примеры и каталоги техник рефакторинга.
- Книга "Рефакторинг": Считается библией рефакторинга, ее прочтение дает вам полное представление о методологии.
- "Чистый код: Руководство по агильной разработке программного обеспечения" Роберта Мартина, где обсуждается написание кода, который легко понять и поддерживать.
