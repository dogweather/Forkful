---
changelog:
- 2024-02-03, gpt-4-0125-preview, translated from English
date: 2024-02-03 17:55:33.272742-07:00
description: "\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\
  \u0435\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u043D\u0430\
  \ \u044F\u0437\u044B\u043A\u0435 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\
  \u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F C \u043F\u043E\u0434\u0440\u0430\
  \u0437\u0443\u043C\u0435\u0432\u0430\u0435\u0442 \u0433\u0435\u043D\u0435\u0440\u0430\
  \u0446\u0438\u044E \u0444\u0430\u0439\u043B\u0430, \u043F\u0440\u0435\u0434\u043D\
  \u0430\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u0434\u043B\u044F\
  \ \u043A\u0440\u0430\u0442\u043A\u043E\u0432\u0440\u0435\u043C\u0435\u043D\u043D\
  \u043E\u0433\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\
  \u0438\u044F, \u043E\u0431\u044B\u0447\u043D\u043E \u043A\u0430\u043A\u2026"
lastmod: '2024-03-13T22:44:45.952973-06:00'
model: gpt-4-0125-preview
summary: "\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\
  \u0435\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u043D\u0430\
  \ \u044F\u0437\u044B\u043A\u0435 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\
  \u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F C \u043F\u043E\u0434\u0440\u0430\
  \u0437\u0443\u043C\u0435\u0432\u0430\u0435\u0442 \u0433\u0435\u043D\u0435\u0440\u0430\
  \u0446\u0438\u044E \u0444\u0430\u0439\u043B\u0430, \u043F\u0440\u0435\u0434\u043D\
  \u0430\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u0434\u043B\u044F\
  \ \u043A\u0440\u0430\u0442\u043A\u043E\u0432\u0440\u0435\u043C\u0435\u043D\u043D\
  \u043E\u0433\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\
  \u0438\u044F, \u043E\u0431\u044B\u0447\u043D\u043E \u043A\u0430\u043A \u0432\u0440\
  \u0435\u043C\u0435\u043D\u043D\u043E\u0433\u043E \u0445\u0440\u0430\u043D\u0438\u043B\
  \u0438\u0449\u0430 \u0434\u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\
  \u043A\u0438 \u0438\u043B\u0438 \u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F\
  \ \u0434\u0430\u043D\u043D\u044B\u0445."
title: "\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\u0435\
  \u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430"
weight: 21
---

## Как:
Создание временного файла в языке программирования C можно осуществить с помощью функций, таких как `tmpfile()` и `mkstemp()`.

**Использование `tmpfile()`**: Эта функция создает уникальный временный файл, который автоматически удаляется при завершении программы или закрытии файла.

```c
#include <stdio.h>

int main() {
    FILE *temp = tmpfile();
    if (temp == NULL) {
        perror("Не удалось создать временный файл");
        return 1;
    }

    // Запись данных во временный файл
    fputs("Это тест.\n", temp);

    // Возврат и чтение написанного
    rewind(temp);
    char buffer[1024];
    while (fgets(buffer, sizeof(buffer), temp) != NULL) {
        printf("%s", buffer);
    }

    // Автоматически удаляется при закрытии или выходе из программы
    fclose(temp);

    return 0;
}
```
**Пример вывода:**
```
Это тест.
```

**Использование `mkstemp()`**: Предоставляет больше контроля над расположением временного файла и его разрешениями. Требует строку-шаблон, которая заканчивается на `XXXXXX`, и затем заменяет ее уникальной последовательностью, чтобы избежать конфликта имен.

```c
#include <unistd.h>
#include <stdio.h>
#include <fcntl.h>

int main() {
    char template[] = "/tmp/mytemp-XXXXXX";
    int fd = mkstemp(template);

    if (fd == -1) {
        perror("Не удалось создать временный файл");
        return 1;
    }
    
    printf("Временный файл создан: %s\n", template);

    // Временные файлы, созданные с использованием mkstemp(), должны быть удалены вручную
    unlink(template);

    close(fd);
    return 0;
}
```
**Пример вывода:**
```
Временный файл создан: /tmp/mytemp-abc123
```

## Подробнее
Концепция временных файлов не уникальна для языка C, она является общим функционалом во многих средах программирования из-за ее полезности при обработке эфемерных данных. Функция `tmpfile()`, стандартизированная в стандарте ISO C, создает файл с уникальным именем в стандартной директории, но его существование недолговечно, что делает его идеальным для безопасных или временных операций.

Одно из заметных ограничений `tmpfile()` заключается в ее зависимости от стандартной временной директории, которая может не подходить для всех приложений, особенно с точки зрения разрешений или безопасности. В отличие от этого, `mkstemp()` позволяет указывать директорию и обеспечивает безопасное создание файла с гарантированным уникальным именем, изменяя предоставленную строку-шаблон, предлагая более универсальное решение за счет ручного управления файлами.

Тем не менее, создание временных файлов может ввести уязвимости для безопасности, такие как условия гонки, если они не обрабатываются должным образом. Например, `tmpfile()` и `mkstemp()` адресуют разные аспекты безопасного создания временных файлов (автоматическое удаление и безопасная генерация имени, соответственно), но ни один из них не является универсальным решением. Разработчикам необходимо учитывать специфику потребностей в безопасности их приложения, включая потенциальные уязвимости, введенные временными файлами, и может потребоваться реализация дополнительных мер безопасности в дополнение к предоставляемым этими функциями.

В более широком контексте программирования, альтернативы, такие как хранение данных в памяти (например, использование динамических структур данных или файлов, отображаемых в памяти), могут предложить лучшую производительность или безопасность для обработки временных данных. Тем не менее, физические временные файлы остаются важным инструментом во многих сценариях, особенно при работе с большими объемами данных или когда требуется межпроцессное взаимодействие.
