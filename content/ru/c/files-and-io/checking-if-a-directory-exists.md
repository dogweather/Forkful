---
aliases:
- /ru/c/checking-if-a-directory-exists/
changelog:
- 2024-02-03, gpt-4-0125-preview, translated from English
date: 2024-02-03 17:52:50.365352-07:00
description: "\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043D\u0430\u043B\u0438\
  \u0447\u0438\u044F \u0434\u0438\u0440\u0435\u043A\u0442\u043E\u0440\u0438\u0438\
  \ \u0432 \u0421\u0438 \u0432\u043A\u043B\u044E\u0447\u0430\u0435\u0442 \u0437\u0430\
  \u043F\u0440\u043E\u0441 \u043A \u0444\u0430\u0439\u043B\u043E\u0432\u043E\u0439\
  \ \u0441\u0438\u0441\u0442\u0435\u043C\u0435, \u0447\u0442\u043E\u0431\u044B \u0443\
  \u0431\u0435\u0434\u0438\u0442\u044C\u0441\u044F, \u0447\u0442\u043E \u043E\u043F\
  \u0440\u0435\u0434\u0435\u043B\u0451\u043D\u043D\u044B\u0439 \u043F\u0443\u0442\u044C\
  \ \u0432\u0435\u0434\u0451\u0442 \u043A \u0434\u0438\u0440\u0435\u043A\u0442\u043E\
  \u0440\u0438\u0438. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\
  \u0442\u044B \u0447\u0430\u0441\u0442\u043E\u2026"
lastmod: 2024-02-18 23:08:57.583193
model: gpt-4-0125-preview
summary: "\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043D\u0430\u043B\u0438\
  \u0447\u0438\u044F \u0434\u0438\u0440\u0435\u043A\u0442\u043E\u0440\u0438\u0438\
  \ \u0432 \u0421\u0438 \u0432\u043A\u043B\u044E\u0447\u0430\u0435\u0442 \u0437\u0430\
  \u043F\u0440\u043E\u0441 \u043A \u0444\u0430\u0439\u043B\u043E\u0432\u043E\u0439\
  \ \u0441\u0438\u0441\u0442\u0435\u043C\u0435, \u0447\u0442\u043E\u0431\u044B \u0443\
  \u0431\u0435\u0434\u0438\u0442\u044C\u0441\u044F, \u0447\u0442\u043E \u043E\u043F\
  \u0440\u0435\u0434\u0435\u043B\u0451\u043D\u043D\u044B\u0439 \u043F\u0443\u0442\u044C\
  \ \u0432\u0435\u0434\u0451\u0442 \u043A \u0434\u0438\u0440\u0435\u043A\u0442\u043E\
  \u0440\u0438\u0438. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\
  \u0442\u044B \u0447\u0430\u0441\u0442\u043E\u2026"
title: "\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043D\u0430\u043B\u0438\u0447\
  \u0438\u044F \u0434\u0438\u0440\u0435\u043A\u0442\u043E\u0440\u0438\u0438"
---

{{< edit_this_page >}}

## Что и Почему?

Проверка наличия директории в Си включает запрос к файловой системе, чтобы убедиться, что определённый путь ведёт к директории. Программисты часто выполняют эту операцию, чтобы убедиться, что операции с файлами (такие как чтение или запись файлов) направлены к действительным путям, что предотвращает ошибки и повышает надёжность программного обеспечения.

## Как это сделать:

В Си существование директории можно проверить с помощью функции `stat`, которая извлекает информацию о файле или директории по указанному пути. Затем используется макрос `S_ISDIR` из `sys/stat.h` для определения, соответствует ли извлечённая информация директории.

Вот как можно использовать `stat` и `S_ISDIR` для проверки существования директории:

```c
#include <stdio.h>
#include <sys/stat.h>

int main() {
    struct stat stats;
    
    // Путь к директории для проверки
    char *dirPath = "/path/to/directory";

    // Получаем статус пути
    int result = stat(dirPath, &stats);

    // Проверяем, существует ли директория
    if (result == 0 && S_ISDIR(stats.st_mode)) {
        printf("Директория существует.\n");
    } else {
        printf("Директория не существует.\n");
    }

    return 0;
}
```

Пример вывода:
```
Директория существует.
```

Или, если директории не существует:
```
Директория не существует.
```

## Подробнее:

Структура и функция `stat` были частью языка программирования Си на протяжении десятилетий, происходя из Unix. Они предоставляют стандартизированный способ извлечения информации о файловой системе, который, несмотря на то, что является относительно низкоуровневым, широко используется из-за своей простоты и прямого доступа к метаданным файловой системы.

Исторически проверка существования и свойств файлов и директорий с помощью `stat` и её производных (таких как `fstat` и `lstat`) была общепринятым подходом. Однако эти функции напрямую взаимодействуют с ядром ОС, что может ввести дополнительные накладные расходы и потенциальные ошибки, если они не обрабатываются должным образом.

Для новых проектов или при работе в высокоуровневых сценариях программисты могут выбрать более абстрактные механизмы обработки файлов, предоставляемые современными фреймворками или библиотеками, которые более изящно обрабатывают ошибки и предоставляют проще API. Тем не менее, понимание и умение использовать `stat` остаётся ценным навыком для сценариев, требующих прямой манипуляции с файловой системой, таких как системное программирование или работа в ограниченных средах, где зависимость от больших библиотек невозможна.
