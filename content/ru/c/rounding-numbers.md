---
title:                "Округление чисел"
date:                  2024-01-29T00:01:57.622581-07:00
model:                 gpt-4-0125-preview
simple_title:         "Округление чисел"

tag:                  "Numbers"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/c/rounding-numbers.md"
changelog:
  - 2024-01-29, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и почему?
Округление чисел - это отбрасывание цифр после определённого места, при этом опционально корректируется последняя оставляемая цифра. Программисты округляют, чтобы снизить точность, когда точные значения не нужны, управлять ошибками с плавающей точкой или подготовить числа к удобному для пользователя отображению.

## Как:
В C для этого обычно используют функции `floor()`, `ceil()` или `round()`. Вот краткий пример:

```C
#include <stdio.h>
#include <math.h>

int main() {
    double num = 3.14159;
    double num_floor = floor(num);
    double num_ceil = ceil(num);
    double num_round = round(num);

    printf("Floor: %.2f\n", num_floor); // Floor: 3.00
    printf("Ceil: %.2f\n", num_ceil);   // Ceil: 4.00
    printf("Round: %.2f\n", num_round); // Round: 3.00
    return 0;
}
```

Для более тонкого контроля, например, округления до определенного знака, вы умножаете, округляете и делите:

```C
double roundToPlace(double num, int place) {
    double scale = pow(10.0, place);
    return round(num * scale) / scale;
}

// ...

double num = 3.14159;
double num_rounded = roundToPlace(num, 2);
printf("Rounded to 2 decimal places: %.2f\n", num_rounded); // Округлено до 2 знаков после запятой: 3.14
```

## Глубинное погружение
В старые времена округление часто означало ручной процесс - тяжёлую работу только с ручкой и бумагой. С развитием вычислительной техники мы автоматизировали этот процесс, но арифметика с плавающей точкой привнесла нюансы из-за её бинарной природы, когда некоторые числа не могут быть точно представлены.

Альтернативы стандартному округлению включают усечение (простое отбрасывание лишних цифр) или банковское округление, которое округляет до ближайшего чётного числа, когда значение находится точно между двумя значениями, уменьшая смещение в повторяющихся расчётах.

Реализация становится сложной, когда вам нужно округлить числа с произвольной точностью или обработать специальные случаи, такие как бесконечность, сигнальные NaNы или субнормальные значения. Функции стандартной библиотеки C обрабатывают основы, но если вам нужно округлить десятичные дроби особыми способами, вам понадобится больше, чем `math.h`.

## Смотрите также
- [Документация по `<math.h>`](https://en.cppreference.com/w/c/numeric/math)
- [Арифметика с плавающей точкой](https://en.wikipedia.org/wiki/Floating-point_arithmetic)
- [Подводные камни проверки вычислений с плавающей точкой](https://dl.acm.org/doi/10.1145/1186736.1186737)
