---
aliases:
- /ru/lua/concatenating-strings/
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-28 23:56:42.172767-07:00
description: "\u041A\u043E\u043D\u043A\u0430\u0442\u0435\u043D\u0430\u0446\u0438\u044F\
  \ \u0441\u0442\u0440\u043E\u043A - \u044D\u0442\u043E \u0438\u0445 \u0441\u0446\u0435\
  \u043F\u043B\u0435\u043D\u0438\u0435 \u0432\u0441\u0442\u044B\u043A \u0434\u043B\
  \u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043D\u043E\u0432\u043E\
  \u0439 \u0441\u0442\u0440\u043E\u043A\u0438. \u041F\u0440\u043E\u0433\u0440\u0430\
  \u043C\u043C\u0438\u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\
  \u0442\u043E \u0434\u043B\u044F \u0434\u0438\u043D\u0430\u043C\u0438\u0447\u0435\
  \u0441\u043A\u043E\u0433\u043E \u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\
  \u043D\u0438\u044F \u0442\u0435\u043A\u0441\u0442\u0430, \u043D\u0430\u043F\u0440\
  \u0438\u043C\u0435\u0440, \u0434\u043B\u044F\u2026"
lastmod: 2024-02-18 23:08:57.140743
model: gpt-4-0125-preview
summary: "\u041A\u043E\u043D\u043A\u0430\u0442\u0435\u043D\u0430\u0446\u0438\u044F\
  \ \u0441\u0442\u0440\u043E\u043A - \u044D\u0442\u043E \u0438\u0445 \u0441\u0446\u0435\
  \u043F\u043B\u0435\u043D\u0438\u0435 \u0432\u0441\u0442\u044B\u043A \u0434\u043B\
  \u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043D\u043E\u0432\u043E\
  \u0439 \u0441\u0442\u0440\u043E\u043A\u0438. \u041F\u0440\u043E\u0433\u0440\u0430\
  \u043C\u043C\u0438\u0441\u0442\u044B \u0434\u0435\u043B\u0430\u044E\u0442 \u044D\
  \u0442\u043E \u0434\u043B\u044F \u0434\u0438\u043D\u0430\u043C\u0438\u0447\u0435\
  \u0441\u043A\u043E\u0433\u043E \u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\
  \u043D\u0438\u044F \u0442\u0435\u043A\u0441\u0442\u0430, \u043D\u0430\u043F\u0440\
  \u0438\u043C\u0435\u0440, \u0434\u043B\u044F\u2026"
title: "\u0421\u043A\u043B\u0435\u0438\u0432\u0430\u043D\u0438\u0435 \u0441\u0442\u0440\
  \u043E\u043A"
---

{{< edit_this_page >}}

## Что и Зачем?
Конкатенация строк - это их сцепление встык для создания новой строки. Программисты делают это для динамического формирования текста, например, для создания сообщений или генерации кода.

## Как выполнить:
В Lua строки конкатенируются с помощью оператора `..`. Посмотрим его в действии:

```lua
local hello = "Привет, "
local world = "мир!"
local greeting = hello .. world

print(greeting)  -- Вывод: Привет, мир!
```

Можно даже добавлять числа с небольшим преобразованием:

```lua
local base = "У меня есть "
local itemCount = 3
local message = base .. itemCount .. " яблока"

print(message)  -- Вывод: У меня есть 3 яблока
```

Помните, преобразование нестроковых типов выполняется вручную:

```lua
local score = 9001
local displayScore = "Ваш счет: " .. tostring(score)

print(displayScore)  -- Вывод: Ваш счет: 9001
```

## Глубокое Погружение
Конкатенация строк может показаться обыденной, но она очень важна. В начале развития Lua она предназначалась для встраиваемых систем, что требовало минимализма. Вот почему для строк был выбран оператор `..` - он прост, но эффективен.

Альтернативы оператору `..` включают:

- Функцию `table.concat` для массивов строк, более эффективную для конкатенации множества строк.
- Функции библиотеки строк, такие как `string.format`, предлагающие более полный контроль над форматированием.

Производительность конкатенации строк в Lua была предметом озабоченности, в особенности с использованием `..`, поскольку каждое его использование создает новую строку, что может быть ресурсоемким в циклах. Чтобы смягчить это, при конкатенации в цикле используйте таблицы:

```lua
local parts = {}
for i = 1, 10 do
    parts[i] = "Часть " .. i
end
local combined = table.concat(parts, ", ")

print(combined)  -- Вывод: Часть 1, Часть 2, ... Часть 10
```

Внутренне Lua управляет строками в хеш-таблице для оптимизации использования памяти, так что идентичные строки используют одно и то же хранилище. Но конкатенация нарушает это совместное использование из-за создания новых строк.

## См. также
- Официальная документация Lua по строкам: https://www.lua.org/manual/5.4/manual.html#6.4
- Программирование на Lua (Книга): https://www.lua.org/pil/contents.html
- Советы по работе со строками: https://lua-users.org/wiki/StringLibraryTutorial
