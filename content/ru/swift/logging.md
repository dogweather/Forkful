---
title:                "Журналирование"
aliases:
- ru/swift/logging.md
date:                  2024-01-28T23:59:53.821993-07:00
model:                 gpt-4-0125-preview
simple_title:         "Журналирование"

tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/swift/logging.md"
changelog:
  - 2024-01-28, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и почему?
Логирование - это процесс записи поведения приложения, ошибок и другой важной информации на постоянный носитель, например, в файл или базу данных. Программисты делают это для отслеживания здоровья и производительности своих приложений, для отладки проблем и чтобы наблюдать за происходящим под капотом в продакшн-средах.

## Как:
В Swift вы можете писать логи в консоль с помощью операторов print или более гибкого API `os.log`, который подключается к Единой Системе Логирования на платформах Apple.

```Swift
import os.log

let logger = OSLog(subsystem: "com.yourapp.domain", category: "network")

func fetchData() {
    // Простое выражение print
    print("Начало получения данных")
    
    // Логирование события уровня информации с использованием os.log
    os_log(.info, log: logger, "Получение данных с API.")
    
    do {
        let data = try performNetworkRequest()
        // Логирование события уровня отладки
        os_log(.debug, log: logger, "Данные получены: %@", data.description)
    } catch {
        // Логирование события уровня ошибки
        os_log(.error, log: logger, "Не удалось получить данные: %@", error.localizedDescription)
    }
}

func performNetworkRequest() throws -> Data {
    // Имитация сетевого запроса
    return Data()
}
```

Пример вывода в консоль может выглядеть так:

```
Начало получения данных
Получение данных с API.
Данные получены: Некоторые байты данных...
```

Для ошибок это может быть:

```
Не удалось получить данные: Похоже, что нет интернет-соединения.
```

## Подробнее
Логирование в Swift становится более мощным и эффективным с введением Единой Системы Логирования в iOS 10 и macOS Sierra. В отличие от оператора `print`, который идет прямо в консоль, эта система основана на деятельности и позволяет фильтровать сообщения журнала на основе их важности и того, являются ли они сборками для отладки или выпуска.

Исторический контекст описывает эволюцию логирования в iOS и macOS от примитивных выражений print к комплексным инструментам, которые интегрируются с приложением Instruments и Консоль, предоставляя сложные способы анализа журналов.

Существует ряд альтернатив логированию в Swift, таких как сторонние библиотеки, например, CocoaLumberjack, которая предлагает макрослой над Единой Системой Логирования. Это обеспечивает расширенный контроль над форматированием логов, управлением файлами и параметрами производительности.

Наконец, детали реализации; OSLog разработан не только для эффективности, но и с учетом конфиденциальности, с возможностью скрытия личных данных при логировании. Он категоризует логи по уровням fault, error, info и debug, каждый из которых предлагает разную детализацию для устранения неполадок.

## См. также
- [Документация по Единой Системе Логирования Apple](https://developer.apple.com/documentation/os/logging)
- [Учебник по логированию от Ray Wenderlich](https://www.raywenderlich.com/605079-logging-in-swift-oslog)
- [Репозиторий CocoaLumberjack на GitHub](https://github.com/CocoaLumberjack/CocoaLumberjack)
