---
title:                "Анализ даты из строки"
aliases:
- ru/ruby/parsing-a-date-from-a-string.md
date:                  2024-01-29T00:00:44.093219-07:00
model:                 gpt-4-0125-preview
simple_title:         "Анализ даты из строки"

tag:                  "Dates and Times"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/ruby/parsing-a-date-from-a-string.md"
changelog:
  - 2024-01-28, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и Зачем?

Разбор даты означает преобразование строки в объект, который понимает компьютер — как, например, объект даты. Программисты это делают, потому что нам часто приходится извлекать даты из таких источников, как формы, файлы или интернет, в виде строк, и нам нужно работать с ними в структурированном, надежном формате.

## Как это сделать:

Ruby поддерживает вас с его библиотекой `Date`, которая делает превращение строк в даты простым, как пирог. Только не забудьте `require 'date'` перед тем, как начать.

```ruby
require 'date'

# Разбор даты (в формате ISO) из строки
date_string = "2023-04-01"
parsed_date = Date.parse(date_string)
puts parsed_date
# => 2023-04-01

# Что, если наш формат вдруг станет неправильным? Попробуйте это.
begin
  custom_date = Date.strptime('03/31/2023', '%m/%d/%Y')
  puts custom_date
rescue ArgumentError
  puts "Это недопустимый формат даты, дружище."
end
# => 2023-03-31
```

## Глубокое Погружение

В старые времена Ruby был менее терпим к форматам даты. Кодерам приходилось вручную манипулировать строками для извлечения дат. Сейчас `Date.parse` автоматически распознает большинство общих форматов даты, и если возникает путаница, `Date.strptime` позволяет указать точный формат, чтобы избежать недопонимания.

Альтернативно, если вы имеете дело с более сложными данными даты-времени, `DateTime` может быть вашим выбором, особенно для разбора времени. Кроме того, для тех, кто работает вне стандартной библиотеки Ruby, существует gem `Chronic` от умных ребят из GitHub, который понимает массу выражений естественного языка для дат.

Под всей этой простотой, разбор Ruby на самом деле работает на шаблонах форматов дат, которые соответствуют различным частям строки даты с соответствующими элементами даты (год, месяц, день и т. д.). Так что, когда ваша строка не соответствует ожидаемому образцу, вам нужно дать знать Ruby с помощью `strptime` и правильных директив формата.

## Смотрите Также

- Для фанатов временных зон, документация `ActiveSupport::TimeWithZone` в Rails может быть интересна: [https://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html](https://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)
- Gem Chronic для разбора дат в естественном языке: [https://github.com/mojombo/chronic](https://github.com/mojombo/chronic)
