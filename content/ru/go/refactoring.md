---
title:                "Рефакторинг"
date:                  2024-01-29T00:01:33.555510-07:00
model:                 gpt-4-0125-preview
simple_title:         "Рефакторинг"

tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/go/refactoring.md"
changelog:
  - 2024-01-29, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и Почему?
Рефакторинг - это процесс реструктуризации существующего компьютерного кода без изменения его внешнего поведения. Программисты делают это для улучшения нефункциональных характеристик программного обеспечения, таких как читаемость и поддерживаемость, что может сделать код более понятным, уменьшить его сложность и помочь легче находить ошибки.

## Как это делать:
Давайте погрузимся в простой пример рефакторинга кода на Go. Мы возьмем фрагмент, который рассчитывает среднее значение массива чисел, и переработаем его для повышения ясности и повторного использования.

Исходный код:
```Go
package main

import "fmt"

func main() {
    numbers := []float64{8, 12, 15, 10, 7, 14}
    var sum float64
    for _, num := range numbers {
        sum += num
    }
    average := sum / float64(len(numbers))
    fmt.Println("Среднее:", average)
}
```

Рефакторинг кода:
```Go
package main

import "fmt"

// CalculateAverage принимает срез float64 и возвращает среднее значение.
func CalculateAverage(numbers []float64) float64 {
    sum := 0.0
    for _, num := range numbers {
        sum += num
    }
    return sum / float64(len(numbers))
}

func main() {
    numbers := []float64{8, 12, 15, 10, 7, 14}
    average := CalculateAverage(numbers)
    fmt.Println("Среднее:", average)
}
```

В рефакторинге кода мы извлекли логику, вычисляющую среднее, в отдельную функцию `CalculateAverage`. Это делает функцию `main` более сжатой, а логику вычисления среднего - повторно используемой и тестируемой.

## Глубокое погружение
Рефакторинг кода - не современное понятие; он предшествовал широкому использованию компьютеров. Практика, вероятно, началась в области машиностроения или даже ранее. В программировании она стала более формализованной с появлением объектно-ориентированного программирования и экстремального программирования (XP) в 1990-х годах, что заметно повлияло под влиянием фундаментальной книги Мартина Фаулера "Рефакторинг: Улучшение дизайна существующего кода".

Существует множество техник рефакторинга, от простого переименования переменных для повышения ясности до более сложных паттернов, таких как извлечение методов или классов. Ключевым моментом является выполнение малых, инкрементных изменений, которые не модифицируют функциональность программного обеспечения, но улучшают внутреннюю структуру.

При использовании Go рефакторинг может быть довольно простым благодаря простоте языка и мощной стандартной библиотеке. Однако по-прежнему важно иметь хороший набор модульных тестов, чтобы гарантировать, что рефакторинг не введет ошибок. Инструменты, такие как `gorename` и `gofmt`, помогают автоматизировать некоторые процессы, а среды разработки часто имеют встроенную поддержку рефакторинга.

Помимо ручного рефакторинга, доступны некоторые автоматизированные инструменты для рефакторинга кода на Go, такие как инструменты рефакторинга GoLand и Go Refactor. Хотя они могут ускорить процесс, они не заменяют понимание кода и осуществление обдуманных изменений.

## Смотрите также
 - [Рефакторинг в Go: Простое - это прекрасно](https://go.dev/blog/slices)
 - [Эффективный Go: Рефакторинг с интерфейсами](https://go.dev/doc/effective_go#interfaces)
 - [Страница рефакторинга Мартина Фаулера](https://refactoring.com/)
 - [Инструменты рефакторинга GoLand](https://www.jetbrains.com/go/features/refactorings/)
