---
aliases:
- /ru/go/working-with-xml/
changelog:
- 2024-02-03, gpt-4-0125-preview, translated from English
date: 2024-02-03 18:13:43.224265-07:00
description: "\u0420\u0430\u0431\u043E\u0442\u0430 \u0441 XML \u0432 Go \u0432\u043A\
  \u043B\u044E\u0447\u0430\u0435\u0442 \u0440\u0430\u0437\u0431\u043E\u0440 (\u0447\
  \u0442\u0435\u043D\u0438\u0435) \u0438 \u0433\u0435\u043D\u0435\u0440\u0430\u0446\
  \u0438\u044E (\u0437\u0430\u043F\u0438\u0441\u044C) \u0434\u043E\u043A\u0443\u043C\
  \u0435\u043D\u0442\u043E\u0432 XML \u2014 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\
  \u0442\u043D\u043E\u0433\u043E \u0444\u043E\u0440\u043C\u0430\u0442\u0430 \u0434\
  \u043B\u044F \u0441\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0438\u0440\u043E\u0432\
  \u0430\u043D\u043D\u043E\u0433\u043E \u043E\u0431\u043C\u0435\u043D\u0430 \u0434\
  \u0430\u043D\u043D\u044B\u043C\u0438. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\
  \u043C\u0438\u0441\u0442\u044B\u2026"
lastmod: 2024-02-18 23:08:56.458556
model: gpt-4-0125-preview
summary: "\u0420\u0430\u0431\u043E\u0442\u0430 \u0441 XML \u0432 Go \u0432\u043A\u043B\
  \u044E\u0447\u0430\u0435\u0442 \u0440\u0430\u0437\u0431\u043E\u0440 (\u0447\u0442\
  \u0435\u043D\u0438\u0435) \u0438 \u0433\u0435\u043D\u0435\u0440\u0430\u0446\u0438\
  \u044E (\u0437\u0430\u043F\u0438\u0441\u044C) \u0434\u043E\u043A\u0443\u043C\u0435\
  \u043D\u0442\u043E\u0432 XML \u2014 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\
  \u043D\u043E\u0433\u043E \u0444\u043E\u0440\u043C\u0430\u0442\u0430 \u0434\u043B\
  \u044F \u0441\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0438\u0440\u043E\u0432\u0430\
  \u043D\u043D\u043E\u0433\u043E \u043E\u0431\u043C\u0435\u043D\u0430 \u0434\u0430\
  \u043D\u043D\u044B\u043C\u0438. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\
  \u0438\u0441\u0442\u044B\u2026"
title: "\u0420\u0430\u0431\u043E\u0442\u0430 \u0441 XML"
---

{{< edit_this_page >}}

## Что и Почему?

Работа с XML в Go включает разбор (чтение) и генерацию (запись) документов XML — стандартного формата для структурированного обмена данными. Программисты делают это для хранения данных, настроек конфигурации или обмена данными между системами, особенно в средах, где XML является предпочтительным или устаревшим форматом данных.

## Как это сделать:

### Разбор XML в Go
Для разбора XML в Go используется пакет `encoding/xml`. Этот пакет предоставляет необходимые инструменты для демаршалинга (разбора) XML в структуры Go. Например, рассмотрим следующие данные XML, представляющие книгу:

```xml
<book id="123">
    <title>Изучаем Go</title>
    <author>Джон Доу</author>
    <pages>359</pages>
</book>
```

Для разбора определите структуру, отражающую структуру XML:

```go
package main

import (
    "encoding/xml"
    "fmt"
    "os"
)

type Book struct {
    XMLName xml.Name `xml:"book"`
    ID      string   `xml:"id,attr"`
    Title   string   `xml:"title"`
    Author  string   `xml:"author"`
    Pages   int      `xml:"pages"`
}

func main() {
    data := []byte(`
<book id="123">
    <title>Изучаем Go</title>
    <author>Джон Доу</author>
    <pages>359</pages>
</book>
`)

    var book Book
    err := xml.Unmarshal(data, &book)
    if err != nil {
        panic(err)
    }

    fmt.Printf("Книга: %+v\n", book)
}
```

Вывод:

```
Книга: {XMLName:{Space: Local:book} ID:123 Title:Изучаем Go Author:Джон Доу Pages:359}
```

### Генерация XML в Go
Для генерации документа XML из структур данных Go, снова используется пакет `encoding/xml`. На этот раз структуры Go маршализуются в XML. Исходя из предыдущей структуры `Book`:

```go
package main

import (
    "encoding/xml"
    "fmt"
    "os"
)

func main() {
    book := &Book{
        ID:     "123",
        Title:  "Изучаем Go",
        Author: "Джон Доу",
        Pages:  359,
    }

    output, err := xml.MarshalIndent(book, "", "    ")
    if err != nil {
        panic(err)
    }

    fmt.Println(xml.Header + string(output))
}
```

Вывод:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<book id="123">
    <title>Изучаем Go</title>
    <author>Джон Доу</author>
    <pages>359</pages>
</book>
```

## Углубленный анализ

Многословность и сложность XML привели к тому, что JSON и другие форматы стали более популярны для многих приложений. Тем не менее, способность XML представлять сложные иерархические данные и его широкое использование в устаревших системах и специфических областях (например, в SOAP-сервисах) обеспечивают его актуальность.

Пакет `encoding/xml` в Go предоставляет мощные механизмы для работы с XML, но стоит отметить его ограничения. Например, обработка пространств имен XML может быть обременительной и может потребовать более детального понимания спецификации XML, чем для более простых случаев использования. Кроме того, хотя статическая типизация в Go и возможности маршалинга и демаршалинга пакета `encoding/xml` в целом эффективны, разработчики могут столкнуться с трудностями при работе с глубоко вложенными структурами или при работе с документами XML, которые не могут быть аккуратно отображены на систему типов Go.

Для большинства современных приложений альтернативы вроде JSON являются более простыми и эффективными. Однако при работе в контекстах, требующих использования XML — из-за устаревших систем, специфических отраслевых стандартов или сложных потребностей в представлении данных — стандартная библиотека Go предоставляет надежные инструменты для выполнения задачи. Как всегда, лучший выбор формата данных зависит от конкретных требований к приложению и среде.
