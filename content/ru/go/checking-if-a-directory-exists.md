---
title:                "Проверка существования директории"
date:                  2024-01-28T23:55:30.522261-07:00
model:                 gpt-4-0125-preview
simple_title:         "Проверка существования директории"

tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/go/checking-if-a-directory-exists.md"
changelog:
  - 2024-01-28, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и почему?
Проверка наличия директории означает подтверждение, что конкретная папка присутствует в файловой системе. Программисты делают это, чтобы избежать ошибок, например, попытки чтения из или записи в отсутствующую директорию.

## Как это сделать:
Стандартная библиотека Go облегчает эту задачу. Используйте `os.Stat` и проверяйте ошибки с `os.IsNotExist`:

```go
package main

import (
	"fmt"
	"os"
)

func main() {
	dir := "/path/to/your/directory"
	if _, err := os.Stat(dir); os.IsNotExist(err) {
		fmt.Printf("Упс: %v\n", err)
	} else {
		fmt.Println("Да, она существует!")
	}
}
```

Пример вывода, если директории не существует:

```
Упс: stat /path/to/your/directory: такого файла или директории нет
```

И если она существует:

```
Да, она существует!
```

## Подробнее
Такая "проверка на существование" является частью Go с самых ранних дней, входит в надежный пакет `os`. Есть и другой способ: `ioutil.ReadDir` читает директорию и возвращает ошибку, если её не существует. Но зачем заморачиваться? Это менее эффективно, если нужна только проверка существования.

Под капотом `os.Stat` делает системный вызов для получения информации о файле или директории. Нет необходимости делать вызов для каждого файла, когда одного достаточно.

В прошлом программисты использовали метод "touch" файла в директории, но это ненужный ввод-вывод. Нам нужен эффективный и изящный код. Go делает это с простотой.

## Смотрите также
- Документация пакета `os` в Go: https://pkg.go.dev/os#Stat
- Операции с файловой системой в Go: https://golang.org/pkg/io/ioutil/#ReadDir
- Больше об обработке ошибок в Go: https://blog.golang.org/error-handling-and-go
