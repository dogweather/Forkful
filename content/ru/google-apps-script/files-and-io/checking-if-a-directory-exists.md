---
title:                "Проверка существования директории"
aliases:
- /ru/google-apps-script/checking-if-a-directory-exists/
date:                  2024-02-01T21:49:17.356608-07:00
model:                 gpt-4-0125-preview
simple_title:         "Проверка существования директории"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/google-apps-script/checking-if-a-directory-exists.md"
changelog:
  - 2024-02-01, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и Почему?

Проверка существования каталога в Google Apps Script включает в себя удостоверение наличия папки в Google Drive. Программисты часто выполняют эту проверку, чтобы избежать ошибок или ненужного создания папок при программном управлении файлами и каталогами.

## Как это сделать:

В Google Apps Script отсутствует прямой метод "exists" для папок. Вместо этого мы используем возможности поиска Google Drive, чтобы проверить, существует ли папка с определенным именем. Вот шаг за шагом пример:

```javascript
// Функция для проверки существования каталога
function checkIfDirectoryExists(directoryName) {
  // Получаем коллекцию папок, соответствующих указанному имени
  var folders = DriveApp.getFoldersByName(directoryName);
  
  // Проверяем, существует ли хотя бы одна папка с указанным именем
  if (folders.hasNext()) {
    Logger.log('Каталог существует.');
    return true;
  } else {
    Logger.log('Каталог не существует.');
    return false;
  }
}

// Пример использования
var directoryName = 'My Sample Folder';
checkIfDirectoryExists(directoryName);
```

Пример вывода:
```
Каталог существует.
```
или 
```
Каталог не существует.
```

Этот скрипт использует метод `getFoldersByName`, который извлекает все папки в Drive пользователя, соответствующие указанному имени. Поскольку имена в Drive не являются уникальными, этот метод возвращает `FolderIterator`. Наличие следующего элемента (`hasNext()`) в этом итераторе указывает на то, что каталог существует.

## Глубокое погружение

Исторически управление файлами в веб- и облачных средах значительно эволюционировало. Google Apps Script, предоставляя обширное API для Google Drive, позволяет выполнять сложные операции управления файлами и папками, включая демонстрируемые механизмы поиска и проверки. Однако заметным аспектом является отсутствие прямой проверки существования, вероятно, из-за допуска в Google Drive наличия нескольких папок с одинаковыми именами, что контрастирует с многими файловыми системами, требующими уникальности имен в рамках одного каталога.

В этом контексте использование метода `getFoldersByName` является эффективным обходным путем, но может потенциально ввести неэффективность в сценарии, где существует огромное количество папок с одинаковыми именами. Альтернативный подход может включать в себя поддержание специфичной для приложения индексации или соглашения об именовании для обеспечения более быстрых проверок, особенно когда производительность становится критически важным фактором.

Хотя подход Google Apps Script может изначально казаться менее прямым по сравнению с проверками существования файлов в языках программирования, непосредственно работающих с одиночной файловой системой, он отражает необходимость обработки сложностей облачного файлового хранилища. Разработчики, использующие Google Apps Script для управления Drive, должны учитывать эти нюансы, оптимизируя под сильные и слабые стороны Google Drive.
