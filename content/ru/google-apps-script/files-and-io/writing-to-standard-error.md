---
title:                "Запись в стандартный поток ошибок"
date:                  2024-02-01T22:09:18.988443-07:00
model:                 gpt-4-0125-preview
simple_title:         "Запись в стандартный поток ошибок"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/google-apps-script/writing-to-standard-error.md"
changelog:
  - 2024-02-01, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и почему?

Запись в стандартный поток ошибок (stderr) в языках программирования заключается в направлении сообщений об ошибках и диагностической информации в отдельный поток, отличный от стандартного вывода (stdout). Программисты делают это, чтобы разделить нормальный вывод программы и сообщения об ошибках, что облегчает отладку и анализ логов.

## Как это сделать:

Google Apps Script, являясь языком сценариев для разработки легковесных приложений на платформе Google Apps, не предоставляет прямой встроенной функции типа `console.error()` для записи в stderr, как вы могли бы найти в Node.js или Python. Однако, вы можете симулировать это поведение, используя службы логирования Google Apps Script или собственную обработку ошибок для управления и разделения вывода ошибок.

### Пример: Использование `Logger` для сообщений об ошибках

```javascript
function logError() {
  try {
    // Симуляция ошибки
    const result = 1 / 0;
    if(!isFinite(result)) throw new Error("Попытка деления на ноль");
  } catch (e) {
    // Запись сообщения об ошибке в логи
    Logger.log('Ошибка: ' + e.message);
  }
}
```

Когда вы запускаете `logError()`, это записывает сообщение об ошибке в лог Google Apps Script, который вы можете просмотреть через `Просмотр > Логи`. Это не совсем stderr, но выполняется аналогичная функция разделения журналов ошибок от стандартных выводов.

### Расширенное диагностическое логирование

Для более продвинутой отладки и логирования ошибок вы можете использовать Stackdriver Logging, теперь известное как Набор операций Google Cloud.

```javascript
function advancedErrorLogging() {
  try {
    // Сознательное вызывание ошибки
    const obj = null;
    const result = obj.someProperty;
  } catch (e) {
    console.error('Обнаружена ошибка: ', e.toString());
  }
}
```

Это направит сообщение об ошибке в Stackdriver Logging, где оно будет управляться как журнал уровня ошибки. Отметим, что интеграция Stackdriver/Набора операций Google Cloud предлагает более детальное и удобное для поиска решение для логирования по сравнению с `Logger`.

## Глубокое погружение

Отсутствие выделенного потока `stderr` в Google Apps Script отражает его природу и происхождение как облачного языка сценариев, где традиционные консольные или терминальные выводы (такие как stdout и stderr) менее актуальны. Исторически Google Apps Script был разработан для повышения функциональности Google Apps с помощью простых скриптов, сосредоточиваясь на простоте использования в ущерб комплексным функциям, доступным в более сложных средах программирования.

Тем не менее, эволюция Google Apps Script в сторону более сложной разработки приложений побудила разработчиков придумывать творческие подходы к обработке ошибок и логированию, используя доступные службы, такие как Logger, и интегрируясь с Набором операций Google Cloud. Эти методы, хоть и не являются прямыми реализациями stderr, предлагают надежные альтернативы для управления ошибками и диагностического логирования в облачно-ориентированной среде.

Критически важно, что, хотя эти методы служат своей цели в экосистеме Google Apps Script, они подчеркивают ограничения платформы по сравнению с традиционными средами программирования. Для разработчиков, требующих детальных и иерархических стратегий обработки ошибок, интеграция с внешними службами логирования или применение Google Cloud Functions, которые предлагают более традиционную обработку stderr и stdout, может быть предпочтительнее.
