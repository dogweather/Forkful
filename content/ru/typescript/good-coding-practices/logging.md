---
title:                "Журналирование"
date:                  2024-01-29T00:00:02.133588-07:00
model:                 gpt-4-0125-preview
simple_title:         "Журналирование"

tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/typescript/logging.md"
changelog:
  - 2024-01-28, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и Почему?

Логгирование - это процесс записи событий, ошибок и другой значимой информации во время выполнения программы на внешний носитель, часто в файлы или базы данных. Программисты используют логи для мониторинга поведения программного обеспечения, отладки проблем и отслеживания системных действий для анализа безопасности и производительности.

## Как это сделать:

В TypeScript можно легко реализовать базовое логгирование с использованием методов консоли или интегрировать более сложное логгирование с помощью библиотек, таких как `winston` или `pino`. Вот простой пример использования `console.log` и более сложный с `winston`.

```TypeScript
// Базовое логгирование через консоль
console.log('Информация: Запуск приложения...');
console.error('Ошибка: Не удается получить данные.');

// Примерный вывод
// Информация: Запуск приложения...
// Ошибка: Не удается получить данные.
```

Для более надежного логгирования давайте настроим `winston`:

```TypeScript
import { createLogger, format, transports } from 'winston';

const logger = createLogger({
  level: 'info',
  format: format.combine(
    format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }),
    format.printf(info => `${info.timestamp} ${info.level}: ${info.message}`)
  ),
  transports: [
    new transports.Console(),
    new transports.File({ filename: 'combined.log' })
  ]
});

logger.info('Сервер запущен!');
logger.warn('Предупреждение: Низкое место на диске.');
logger.error('Ошибка при подключении к базе данных.');

// Примерный вывод в combined.log
// 2023-01-20 14:42:07 info: Сервер запущен!
// 2023-01-20 14:42:09 warn: Предупреждение: Низкое место на диске.
// 2023-01-20 14:42:12 error: Ошибка при подключении к базе данных.
```

## Глубже в тему:

Концепция логгирования в контексте вычислений восходит к ранним дням программирования, где сам термин произошел от "судового журнала", системы ведения записей в мореплавании. Исторически, события программ часто записывались на физическую бумагу или вывод терминала, особенно в эпоху мэйнфреймов.

Перемотав время вперед, сегодня у вас есть множество инструментов и библиотек, которые отвечают различным потребностям в логгировании, от простых текстовых файлов до сложных систем управления логами. Альтернативы `winston` включают в себя `pino`, которая славится высокой производительностью, и `Bunyan`, основанный на JSON. При работе с Node.js библиотеки логгирования часто предоставляют механизмы потоков для направления логов в разные места, поддержку ротации логов и настраиваемые форматтеры.

С точки зрения реализации, сообщения логов обычно содержат временную метку, уровень серьезности (такой как info, warn, error) и само сообщение. Хорошая практика логгирования рекомендует правильно категоризировать уровни логов, избегать чувствительных данных в логах и учитывать последствия для производительности в приложениях с высокой пропускной способностью.

## Смотрите также:

- [Winston - логгер для почти всего](https://www.npmjs.com/package/winston)
- [Pino - логгер Node.js с очень низкими накладными расходами](https://www.npmjs.com/package/pino)
- [Лучшие практики логгирования в Node.js](https://thisdavej.com/using-winston-a-versatile-logging-library-for-node-js/)
- [12 факторное приложение - Логи](https://12factor.net/logs)
