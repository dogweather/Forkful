---
title:                "Создание временного файла"
date:                  2024-01-28T23:57:23.310646-07:00
model:                 gpt-4-0125-preview
simple_title:         "Создание временного файла"

tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/php/creating-a-temporary-file.md"
changelog:
  - 2024-01-28, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и зачем?
Создание временного файла в PHP означает создание файла, который будет существовать достаточно долго, чтобы вы могли его использовать, а затем исчезнет без следа. Зачем это делать? Это отлично подходит для обработки кусков данных в процессе выполнения, хранения конфиденциальной информации вне диска и обеспечения отсутствия следов после завершения работы вашего скрипта.

## Как:
PHP позволяет создавать временные файлы с помощью функции `tmpfile()`, которая создает файл во временной директории вашей системы. Вот быстрый пример:

```PHP
<?php
$tempFile = tmpfile();
fwrite($tempFile, "Привет, временный мир!");
rewind($tempFile);

echo fread($tempFile, 1024); // Читаем, что мы записали в файл

fclose($tempFile); // Временный файл автоматически удаляется
?>
```

Пример вывода:
```
Привет, временный мир!
```

Вы также можете использовать `tempnam()`, чтобы получить имя файла, которым вы можете управлять самостоятельно:

```PHP
<?php
$tempFilePath = tempnam(sys_get_temp_dir(), 'Tux');
file_put_contents($tempFilePath, "Пингвины - это круто!");

echo file_get_contents($tempFilePath); // Читаем содержимое файла

unlink($tempFilePath); // Удаляем файл, когда закончили
?>
```

Пример вывода:
```
Пингвины - это круто!
```

## Погружение в тему
Функция `tmpfile()` существует в PHP с самых ранних дней. Она занимается созданием и очисткой файла за вас, избегая потенциальных рисков безопасности, связанных с оставлением конфиденциальных данных.

С другой стороны, `tempnam()` предоставляет вам только имя, оставляя управление файлом на ваше усмотрение. Одно предостережение: всегда помните о необходимости `unlink()` файла, когда вы закончили.

Эти временные файлы обычно хранятся в директории временных файлов вашей системы по умолчанию, которую можно найти с помощью `sys_get_temp_dir()`. Это расположение может варьироваться в зависимости от вашей операционной системы и конфигурации среды.

У вас также есть альтернативы, такие как `tempnam()` и `tmpfile()`, а также более изысканная функция `sys_get_temp_dir()` для получения этой скрытной временной директории. Но помните золотое правило с временными файлами: всегда оставляйте за собой порядок - PHP делает часть этой работы автоматически, но хорошей практикой будет чёткое следование этому.

## Смотрите также
- [Официальная документация PHP по функции tmpfile()](https://www.php.net/manual/ru/function.tmpfile.php)
- [Руководство PHP по функции tempnam()](https://www.php.net/manual/ru/function.tempnam.php)
- [Информация на PHP.net о функции sys_get_temp_dir()](https://www.php.net/manual/ru/function.sys-get-temp-dir.php)
- [Безопасность файловой системы](https://www.php.net/manual/ru/security.filesystem.php)
