---
title:                "Журналирование"
date:                  2024-01-28T23:59:50.021987-07:00
model:                 gpt-4-0125-preview
simple_title:         "Журналирование"

tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/php/logging.md"
changelog:
  - 2024-01-28, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и почему?

Логирование по сути похоже на ведение дневника для вашего кода; это процесс записи событий, ошибок и других значимых точек данных, которые происходят при выполнении вашего приложения. Программисты делают это, чтобы отслеживать, что происходит под капотом, отлаживать проблемы и поддерживать аудиторский журнал для последующего анализа или целей соответствия.

## Как:

PHP имеет встроенную функцию логирования ошибок, которая легко используется. Просто добавьте `error_log()` в свой код, чтобы отправить сообщение в логи сервера. Вы также можете настроить его так, чтобы записывалось в определенный файл.

```php
<?php
// Логирование простого информационного сообщения
error_log("Это информационная запись в лог.");

// Логирование сообщения об ошибке
error_log("Это запись об ошибке в лог.", 0);

// Логирование в указанный файл
file_put_contents('/path/to/your/custom.log', "Пользовательская запись в лог.\n", FILE_APPEND);

// Использование Monolog для структурированного логирования
require 'vendor/autoload.php';
use Monolog\Logger;
use Monolog\Handler\StreamHandler;

// Создание логгера
$logger = new Logger('name');
// Теперь добавьте некоторые обработчики
$logger->pushHandler(new StreamHandler('/path/to/your/monolog.log', Logger::WARNING));

// Теперь вы можете использовать ваш логгер
$logger->warning('Это предупреждающее сообщение лога!');
$logger->error('Это сообщение об ошибке в логе!');
?>
```

Это выведет ваши логи либо в журнал сервера, либо в ваш указанный файл в формате обычного текста.

## Погружение:

Исторически разработчики PHP полагались на функцию `error_log()` или логи Apache/Nginx для выявления проблем, но это может быть хаотичным из-за необходимости разбирать обычные текстовые файлы и отсутствия простого способа для их фильтрации или сортировки. Входят библиотеки логирования, такие как Monolog, которые ввели эру структурированного логирования в PHP. Эти решения дают вам больше контроля, предлагая множество каналов логирования, уровни серьезности и форматированный вывод (например, JSON, который идеален для программной обработки).

Альтернативы Monolog включают Log4php, KLogger и Log4php от Apache. С точки зрения реализации, надежное логирование требует не просто случайной записи данных, но учет таких вещей, как ротация логов, стратегии архивации и интеграция с инструментами мониторинга, чтобы действительно быть полезным.

Следует также иметь в виду [Интерфейс логгера PSR-3](https://www.php-fig.org/psr/psr-3/), который описывает общий интерфейс для библиотек логирования, гарантируя взаимодействие и последовательный способ доступа к механизмам логирования.

## См. также:

- [Репозиторий Monolog на GitHub](https://github.com/Seldaek/monolog)
- [Спецификация Интерфейса логгера PSR-3](https://www.php-fig.org/psr/psr-3/)
- [Документация по Error Log в PHP](https://www.php.net/manual/ru/function.error-log.php)
- [KLogger: Простой класс логирования для PHP](https://github.com/katzgrau/KLogger)
- [Log4php: Универсальная система логирования для PHP](https://logging.apache.org/log4php/)

Начните с использования встроенных функций, но для более удобного и масштабируемого подхода, рассмотрите возможность потратить время, чтобы освоить библиотеку вроде Monolog. Счастливого логирования!
