---
title:                "生成随机数"
date:                  2024-01-27T20:34:39.030002-07:00
model:                 gpt-4-0125-preview
simple_title:         "生成随机数"

tag:                  "Numbers"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/zh/lua/generating-random-numbers.md"
---

{{< edit_this_page >}}

## 什么 & 为什么？

在编程中生成随机数是关于产生不可预测的数值，这些数值可以用于各种目的，如模拟、游戏或安全应用。程序员使用这一功能引入不确定性元素或模拟现实生活中的可变性，以丰富他们的项目。

## 如何操作：

Lua通过`math.random`函数内置支持生成随机数。根据所需输出，这个函数可以以多种方式使用：

1. **生成一个0到1之间的随机浮点数：**

```Lua
print(math.random())
```

示例输出可能是`0.13117647051304`。每次运行产生不同的值。

2. **在指定范围内生成一个随机整数：**

要生成两个边界（含边界）之间的一个随机整数，你首先需要使用`math.randomseed(os.time())`来设置种子，以实现可变性，然后调用带有两个参数的`math.random`：

```Lua
math.randomseed(os.time())
print(math.random(1, 10)) -- 生成一个介于1到10之间的随机整数
```

示例输出可能是`7`。同样，输出会随每次执行而变化。

使用`math.randomseed`设置种子是至关重要的，因为没有它，`math.random`可能会在程序每次运行时生成相同的数字序列。通常，使用当前时间`os.time()`作为种子，以确保每次执行都有不同的序列。

## 深入了解

Lua（以及大多数编程语言）中随机数生成的机制并非真正的随机，而是通过算法生成的伪随机。这些伪随机数生成器 (PRNGs) 是确定性的，需要一个种子值来开始数字序列的生成。种子的选择对随机性质量至关重要，这就是为什么使用当前时间是一种常见做法。

历史上，Lua的随机数生成能力已经发展。早期版本依赖于C标准库的`rand()`函数，其质量和性能在不同实现中有所变化。Lua的当前版本通过可能使用基于底层平台的更健壮的机制来增强这一点，为生成随机数提供了更大的一致性和实用性。

对于需要加密级随机性的项目，内置于Lua的功能可能不足以满足需求，因为PRNGs的确定性特点。在这种情况下，程序员常常转向外部库或系统特定的API，这些API可以提供非确定性随机数，适用于高安全性应用。
