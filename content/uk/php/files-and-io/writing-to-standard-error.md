---
title:                "Запис до стандартної помилки"
date:                  2024-02-03T19:34:24.688017-07:00
model:                 gpt-4-0125-preview
simple_title:         "Запис до стандартної помилки"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/php/writing-to-standard-error.md"
changelog:
  - 2024-02-03, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Що та чому?

Запис у стандартний потік помилок (stderr) у PHP полягає в направленні повідомлень про помилки або діагностику окремо від стандартного виводу (stdout), дозволяючи розробникам краще керувати своїми потоками виводу для налагодження та ведення журналів. Програмісти використовують цю техніку, щоб забезпечити, що повідомлення про помилки не перешкоджають виводу програми, роблячи легшим моніторинг та виправлення помилок у програмах.

## Як зробити:

У PHP запис у stderr може бути досягнутий з використанням функції `fwrite()` разом з попередньо визначеною константою `STDERR`, яка представляє потік виводу помилок.

```php
<?php
// Запис простого повідомлення в stderr.
fwrite(STDERR, "Це повідомлення про помилку.\n");
```

Приклад виводу при виконанні скрипта з командного рядка:
```
Це повідомлення про помилку.
```

Щоб продемонструвати більш практичне використання, розгляньте сценарій, коли ви аналізуєте вхідні дані користувача і натрапляєте на неочікувані дані:
```php
<?php
$input = 'неочікувані дані';

// Симуляція помилки при обробці вхідних даних користувача.
if ($input === 'неочікувані дані') {
    fwrite(STDERR, "Помилка: Отримано несподівані вхідні дані.\n");
    exit(1); // Вихід з ненульовим значенням, щоб вказати на помилку.
}
```

Хоча вбудовані можливості PHP для обробки stderr загалом достатні, при роботі з більш складними програмами або при бажанні інтегрувати журналювання помилок stderr з зовнішніми системами, бібліотеки третіх сторін, як-от Monolog, можуть бути потужним союзником. Monolog - це бібліотека для ведення журналів, яка може обробляти stderr серед багатьох інших цілей (файли, сокети тощо).

Використання Monolog для запису в stderr:

Спочатку переконайтеся, що у вас встановлений Monolog через Composer:
```
composer require monolog/monolog
```

Після цього ви можете налаштувати Monolog на використання `StreamHandler`, націленого на `php://stderr`:

```php
<?php
require 'vendor/autoload.php';

use Monolog\Logger;
use Monolog\Handler\StreamHandler;

// Створення каналу журналу
$log = new Logger('name');
$log->pushHandler(new StreamHandler('php://stderr', Logger::WARNING));

// Додавання повідомлення журналу в stderr
$log->warning('Це повідомлення про попередження.');
```

Використання коду вище дозволяє Monolog відправити повідомлення про попередження в stderr, що є особливо корисним для програм, які потребують детальних налаштувань журналювання або зовнішнього моніторингу журналів.
