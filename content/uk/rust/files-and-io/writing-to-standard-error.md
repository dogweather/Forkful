---
title:                "Запис до стандартної помилки"
aliases:
- /uk/rust/writing-to-standard-error/
date:                  2024-02-03T19:35:00.762499-07:00
model:                 gpt-4-0125-preview
simple_title:         "Запис до стандартної помилки"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/rust/writing-to-standard-error.md"
changelog:
  - 2024-02-03, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Що і чому?
Запис в стандартний потік помилок (stderr) в Rust полягає в направленні повідомлень про помилки та діагностику на консоль окремо від стандартного виводу (stdout). Програмісти роблять це, щоб диференціювати звичайний вивід програми від повідомлень про помилки, що полегшує належну обробку помилок або їх перенаправлення до логів чи файлів під час виконання.

## Як це зробити:
Rust надає простий спосіб запису в stderr за допомогою макросу `eprintln!`, подібно до того, як використовується `println!` для stdout. Ось базовий приклад:

```rust
fn main() {
    eprintln!("Це повідомлення про помилку!");
}
```

Приклад виводу (у стандартний потік помилок):
```
Це повідомлення про помилку!
```

Для більшого контролю над повідомленнями про помилки, наприклад, коли ви хочете форматувати текст чи обробляти результати введення/виведення, використовуйте функцію `stderr` з модуля `std::io`. Цей метод надає дескриптор до глобального потоку stderr, до якого ви потім можете записувати за допомогою методів, таких як `write_all` або `writeln` з трейта `Write`:

```rust
use std::io::{self, Write};

fn main() {
    let stderr = io::stderr();
    let mut handle = stderr.lock();
    
    writeln!(handle, "Форматоване повідомлення про помилку: {}", 404).expect("Не вдалося записати в stderr");
}
```

Приклад виводу (у стандартний потік помилок):
```
Форматоване повідомлення про помилку: 404
```

Якщо ви працюєте в середовищах або додатках, де ви покладаєтеся на бібліотеки для журналювання або обробки помилок, такі бібліотеки, як `log` та `env_logger`, є популярними. Хоча вони використовуються більше для цілей журналювання, вони є налаштовуваними і можуть направляти рівні журналу помилок до stderr. Нижче наведено простий приклад використання `log` та `env_logger`:

Спочатку додайте залежності до вашого `Cargo.toml`:
```toml
[dependencies]
log = "0.4"
env_logger = "0.9"
```

Потім налаштуйте та використовуйте журналювання у вашому додатку:
```rust
fn main() {
    env_logger::init();
    log::error!("Це повідомлення про помилку, записане до stderr");
}
```

Запуск цієї програми (після налаштування `env_logger` з відповідною змінною оточення, наприклад, `RUST_LOG=error`) виведе повідомлення про помилку в stderr, використовуючи інфраструктуру журналювання.

```plaintext
ERROR: Це повідомлення про помилку, записане до stderr
```
