---
title:                "Зміна файлів за допомогою однорядкових команд у терміналі"
date:                  2024-01-26T22:25:38.114201-07:00
model:                 gpt-4-0125-preview
simple_title:         "Зміна файлів за допомогою однорядкових команд у терміналі"
programming_language: "Ruby"
category:             "Ruby"
tag:                  "Data and Text Processing"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/ruby/modifying-files-with-cli-one-liners.md"
---

{{< edit_this_page >}}

## Що і чому?
Модифікація файлів за допомогою CLI (інтерфейсу командного рядка) одиночними командами в Ruby передбачає швидкі та часто прості маніпуляції з текстом безпосередньо з терміналу, використовуючи опції командного рядка Ruby. Ця техніка є незамінною, коли вам потрібно внести пакетні зміни до файлів, фільтрувати вміст або автоматизувати завдання редагування без відкриття редактора. Йдеться про ефективне використання можливостей обробки тексту в Ruby для програмованих редагувань.

## Як це зробити:
Припустимо, у вас є файл під назвою `example.txt` з кількома рядками тексту, і ви хочете переставити порядок рядків у зворотньому напрямку. З Ruby ви можете зробити це однією командою:

```ruby
ruby -e 'puts File.readlines("example.txt").reverse' 
```

Або, якщо ви хочете замінити всі входження "foo" на "bar" у `data.txt`, ви можете зробити так:

```ruby
ruby -i.bak -pe 'gsub(/foo/, "bar")' data.txt
```

Ця команда також створює резервну копію (`data.txt.bak`) оригінального файлу, демонструючи турботу Ruby про безпеку даних. Приклад виводу не видно безпосередньо, оскільки ці команди змінюють вміст файлу, але ви можете виконати `cat data.txt`, щоб побачити зміни.

## Поглиблений розгляд
Флаг `-e` каже Ruby виконати наданий скрипт, тоді як `-i` дозволяє редагування на місці з необов'язковим розширенням для створення резервного файлу. Флаг `-p` перебирає вхідні дані та друкує кожен рядок після застосування скрипту, подібно до sed в Unix/Linux.

Історично, редагування на місці та обробка командного рядка були територіями, що контролювалися sed, awk та perl. Однак, Ruby інтегрує ці функціональності гарно, дозволяючи складніші маніпуляції завдяки своєму багатому синтаксису та вбудованим бібліотекам.

Альтернативи для модифікації файлів включають sed та awk для простіших завдань або використання повних скриптів Ruby для складнішої обробки. Недолік використання Ruby для одиночних команд може бути продуктивність для дуже великих файлів або складних операцій, де інструменти, спеціально призначені для обробки тексту, можуть працювати швидше.

З точки зору реалізації, коли Ruby обробляє файли в лінії, він фактично створює тимчасовий вивід під час читання файлу, а потім замінює оригінальний файл цим виводом. Цей деталь підкреслює важливість опцій резервного копіювання або ретельного тестування з використанням флагу `-i` для уникнення втрати даних.

## Дивіться також
- Офіційна документація Ruby про опції командного рядка: [https://www.ruby-lang.org/en/documentation/quickstart/3/](https://www.ruby-lang.org/en/documentation/quickstart/3/)
- Розгорнуте порівняння обробки тексту в Ruby проти sed та awk: [https://www.gnu.org/software/sed/manual/sed.html](https://www.gnu.org/software/sed/manual/sed.html)
- Для поглибленого занурення в обробку файлів та I/O в Ruby: [https://ruby-doc.org/core-2.7.0/IO.html](https://ruby-doc.org/core-2.7.0/IO.html)
