---
title:                "Редагування файлів безпосередньо за допомогою командного рядка одним рядком"
aliases:
- uk/ruby/editing-files-in-place-with-cli-one-liners.md
date:                  2024-01-27T16:21:42.079762-07:00
model:                 gpt-4-0125-preview
simple_title:         "Редагування файлів безпосередньо за допомогою командного рядка одним рядком"

tag:                  "Data and Text Processing"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/ruby/editing-files-in-place-with-cli-one-liners.md"
---

{{< edit_this_page >}}

## Що та Чому?

Редагування файлів на місці за допомогою однорядкових команд CLI (Інтерфейс командного рядка) в Ruby дозволяє вам змінювати файли безпосередньо з вашого терміналу, без необхідності відкривати їх у редакторі, вносити зміни та зберігати назад. Ця техніка неймовірно корисна для швидких модифікацій, пакетних оновлень або автоматизації повторюваних завдань, економлячи час та зусилля.

## Як це робити:

Ruby надає простий спосіб редагувати файли на місці прямо з командного рядка. Використовуючи перемикач `-i` в Ruby, ви можете наказати Ruby працювати безпосередньо з наданими файлами. Давайте розглянемо кілька прикладів, щоб побачити, як це працює у реальному житті. Уявіть, що у вас є файл `greetings.txt` з наступним вмістом:

```
Привіт, світ!
Привіт, Ruby!
Привіт, програмування!
```

І ви хочете замінити слово "Привіт" на "Привітання". Ось як це можна зробити:

```Ruby
ruby -i -pe "gsub(/Привіт/, 'Привітання')" greetings.txt
```

Після виконання цієї команди `greetings.txt` буде оновлено до:

```
Привітання, світ!
Привітання, Ruby!
Привітання, програмування!
```

Якщо вас турбує потенційне пошкодження даних, Ruby покриває вас. Надаючи розширення до перемикача `-i`, Ruby створює резервну копію перед виконанням змін. Наприклад:

```Ruby
ruby -i.bak -pe "gsub(/Привіт/, 'Бувай')" greetings.txt
```

Тепер, поряд з вашим відредагованим `greetings.txt`, ви знайдете `greetings.txt.bak` у тій же директорії, який містить оригінальний вміст.

## Поглиблений аналіз

Магія редагування файлів на місці в Ruby випливає з його поєднання можливостей обробки тексту подібних до Perl і власної синтаксичної елегантності Ruby. Історично, Perl був мовою вибору для швидкого скриптування в один рядок, особливо для маніпуляцій з текстом. Ruby взяв цей парадигму, дозволяючи потужні можливості скриптування командного рядка.

Альтернативи редагуванню файлів на місці існують і в інших мовах, таких як сам Perl і sed, редактор потоків в системах Unix. Кожна має свої сильні сторони - Perl відомий своїми можливостями обробки тексту, тоді як sed неперевершений у своїй простоті для завдань редагування потоків. Однак, Ruby пропонує баланс, забезпечуючи міцну обробку тексту з більш зрозумілим і дружелюбним до користувача синтаксисом, особливо для тих, хто вже знайомий з Ruby.

На фронті реалізації, редагування файлів на місці в Ruby працює шляхом перейменування оригінального файлу, створення нового з оригінальним іменем файлу і потім запису змін в цей новий файл, поки він читає з перейменованого оригіналу. Цей підхід забезпечує атомарність операції; або весь файл обробляється успішно, або зміни не вносяться, захищаючи цілість ваших даних під час редагування. Цей механізм, у поєднанні з обробкою винятків Ruby, також надає стійкість проти переривань, таких як відключення живлення або завершення процесів, гарантуючи, що принаймні резервна копія залишиться недоторканною.

У підсумку, редагування файлів на місці в Ruby є свідченням його корисності як мови скриптування, пропонуючи суміш потужності, простоти та елегантності для завдань маніпуляції з текстом безпосередньо з командного рядка.
