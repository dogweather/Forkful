---
title:                "Логування"
date:                  2024-01-26T01:01:36.734210-07:00
model:                 gpt-4-1106-preview
simple_title:         "Логування"
programming_language: "C"
category:             "C"
tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/c/logging.md"
---

{{< edit_this_page >}}

## Що і для чого?
Логування (ведення записів подій) по суті є процесом фіксації дій вашої програми, зазвичай шляхом запису повідомлень у файл або термінал. Програмісти використовують його для відстеження подій, діагностики проблем та створення аудит-трейлу (історії аудиту), який розповідає про роботу програми протягом часу.

## Як це робити:
Почнемо з основ. У C немає вбудованого фреймворку для логування, але ви можете створити щось просте з використанням `stdio.h`. Ось як:

```c
#include <stdio.h>
#include <time.h>

void logMessage(const char* message) {
    time_t now;
    time(&now);
    char *date = ctime(&now);
    date[strlen(date) - 1] = '\0'; // Видалення символу нового рядка в кінці результату ctime()
    printf("[%s] %s\n", date, message);
}

int main() {
    logMessage("Application has started.");
    // ... тут ваш код ...
    logMessage("Application is doing something important.");
    // ... код продовжується ...
    logMessage("Application has ended.");
    return 0;
}
```

Прикладний вивід міг би виглядати ось так:

```
[Tue Mar 9 12:00:01 2023] Application has started.
[Tue Mar 9 12:00:02 2023] Application is doing something important.
[Tue Mar 9 12:00:03 2023] Application has ended.
```

Звісно, у реальному світі ви, ймовірно, хотіли б писати в файл замість терміналу, обробляти різні рівні логів і, можливо, використовувати готову бібліотеку.

## Поглиблений Розділ
Логування у C має своєрідний шарм – воно так само низькорівневе, як і більшість іншого коду на цій мові. Історично, логування здійснювалося за допомогою `fprintf` з використанням `stderr` або вказівника на файл. Однак зі зростанням складності програм, потреби в логуванні також зросли, що призвело до розробки таких бібліотек, як `syslog` в системах Unix, які могли обробляти логування з різних джерел з різним рівнем важливості.

У сучасному світі існує безліч бібліотек для логування на C, таких як `zlog`, `log4c` та `glog`, які пропонують багатий набір функціоналу, включаючи ротацію логів, структуроване логування та багатопоточне логування. Ці рішення дозволяють точно контролювати гучність логів, їх призначення та формати.

При впровадженні системи логування необхідно звернути увагу на такі деталі, як форматування часових міток, управління файлами логів та продуктивність. Так, часові мітки в логах є критично важливими для кореляції подій, в той час як ротація логів запобігає надмірному споживанню дискового простору файлами логів. Процес логування також має бути швидким та неблокуючим для основного потоку програми, щоб логування не стало вузьким місцем.

## Дивіться Також
Щоб глибше зануритися в бібліотеки та практики логування на C, перегляньте ці ресурси:

- GNU `syslog` посібник: https://www.gnu.org/software/libc/manual/html_node/Syslog.html
- `zlog`: Високо налаштовувана бібліотека логування для C - https://github.com/HardySimpson/zlog
- `log4c`: Фреймворк логування для C, створений на зразок Log4j - http://log4c.sourceforge.net/
- `glog`: Бібліотека логування на рівні програм від Google - https://github.com/google/glog
