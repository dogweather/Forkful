---
title:                "Робота з XML"
aliases:
- uk/c/working-with-xml.md
date:                  2024-02-03T18:13:45.682980-07:00
model:                 gpt-4-0125-preview
simple_title:         "Робота з XML"
tag:                  "Data Formats and Serialization"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/c/working-with-xml.md"
changelog:
  - 2024-02-03, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Що і чому?

Робота з XML у мові програмування C включає в себе аналіз, запити та маніпулювання XML-документами за допомогою різних бібліотек. Програмісти використовують XML через його широке використання у веб-сервісах, файлах конфігурації та передачі даних між різними системами, що потребує навичок ефективного використання XML для розробки надійних застосунків.

## Як це робити:

C не має вбудованої підтримки XML, тому вам потрібно буде використовувати зовнішні бібліотеки. Одним з популярних варіантів є `libxml2`, стабільна і функціонально багата бібліотека. Ось як прочитати та аналізувати XML-файл за допомогою `libxml2`.

Спершу переконайтеся, що у вас встановлено `libxml2` на вашій системі. Можливо, вам доведеться встановити його через менеджер пакунків (наприклад, `apt-get install libxml2-dev` на системах Debian).

Далі, включіть заголовок `libxml2` у вашу програму на C:

```c
#include <libxml/parser.h>
#include <libxml/tree.h>
```

Тепер, давайте напишемо просту програму для аналізу XML-файлу та виведемо назви елементів першого рівня:

```c
#include <stdio.h>
#include <libxml/parser.h>
#include <libxml/tree.h>

int main(void) {
    xmlDoc *document = NULL;
    xmlNode *root_element = NULL;

    // Ініціалізація бібліотеки та перевірка потенційних невідповідностей ABI
    LIBXML_TEST_VERSION

    // Аналіз файлу та отримання DOM
    document = xmlReadFile("your_file.xml", NULL, 0);

    if (document == NULL) {
        printf("Не вдалося проаналізувати XML-файл\n");
        return -1;
    }

    // Отримання кореневого елемента вузла
    root_element = xmlDocGetRootElement(document);

    for (xmlNode *currentNode = root_element; currentNode; currentNode = currentNode->next) {
        if (currentNode->type == XML_ELEMENT_NODE) {
            printf("Тип вузла: Елемент, назва: %s\n", currentNode->name);
        }
    }

    // Звільнення пам'яті, виділеної для аналізатора та DOM
    xmlFreeDoc(document);

    // Очищення та перевірка витоків
    xmlCleanupParser();
    xmlMemoryDump(); // За бажанням

    return 0;
}
```

Щоб скомпілювати цю програму, переконайтеся, що ви зв’язали її з `libxml2`:

```sh
gcc -o xml_example xml_example.c $(xml2-config --cflags --libs)
```

Якщо у вас є XML-файл під назвою `your_file.xml`, запуск скомпільованої програми має вивести назви її елементів першого рівня.

## Поглиблений огляд

Взаємодія між C та XML є історією об'єднання двох дуже різних світів: структурованого, на рівні байтів, процедурного парадигму C та ієрархічного, многословного, орієнтованого на документи моделювання XML. Інтегруючи можливості роботи з XML у програми на C, розробники використовують силу C - таку як швидкість і доступ на низькому рівні до пам'яті - для ефективного аналізу та маніпуляції XML-документами.

`libxml2`, розроблений як частина проекту GNOME, став де-факто стандартом для обробки XML у C завдяки своїй всебічній підтримці стандартів XML та продуктивності. Він втілює роки розробки та внесок спільноти, роблячи його міцним і ефективним для більшості завдань XML.

Хоча `libxml2` пропонує потужні можливості, варто зазначити, що складність аналізу та маніпулювання XML може ввести значні перевантаження. У сценаріях, де надмірність та складність XML є необґрунтованими, альтернативи, такі як JSON можуть бути більш виправданими для обміну даними. Однак, для застосунків або середовищ, центрованих на XML, де використання XML є закріпленим, освоєння використання `libxml2` у C відкриває можливість працювати з широким спектром XML-документів та API, згладжуючи розрив між мовою програмування C та світом структурованої обробки документів.
