---
title:                "Логування"
date:                  2024-02-03T17:59:38.111431-07:00
model:                 gpt-4-0125-preview
simple_title:         "Логування"
tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/c/logging.md"
changelog:
  - 2024-02-03, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Що і чому?

Логування в C полягає у записі потоку та помітних подій програми під час її виконання, надаючи можливість перегляду її поведінки та продуктивності. Програмісти використовують логування для налагодження, моніторингу здоров'я програмного забезпечення та забезпечення безпеки системи.

## Як це зробити:

У C логування можна реалізувати з використанням базових операцій з файлами або за допомогою більш складних бібліотек. Для простоти розпочнемо зі стандартної бібліотеки вводу/виводу. Наведені фрагменти демонструють базову реалізацію логування.

Для логування простих повідомлень:

```c
#include <stdio.h>

int main() {
    FILE *logFile;
    logFile = fopen("application.log", "a"); // Відкрити файл логу в режимі додавання
    
    if (logFile == NULL) {
        perror("Помилка відкриття файлу логу.");
        return -1;
    }
    
    fprintf(logFile, "Запуск програми.\n");
    
    // Логіка вашої програми тут
    
    fprintf(logFile, "Програма успішно завершена.\n");
    fclose(logFile);
    
    return 0;
}
```

Вивід у `application.log`:

```
Запуск програми.
Програма успішно завершена.
```

Для включення детальніших логів з мітками часу та рівнями логування:

```c
#include <stdio.h>
#include <time.h>

void logMessage(FILE *logFile, const char* level, const char* message) {
    time_t now;
    time(&now);
    char* datetime = ctime(&now);
    datetime[strlen(datetime)-1] = '\0'; // Видалення символу нового рядка
    fprintf(logFile, "[%s] %s - %s\n", datetime, level, message);
}

int main() {
    FILE *logFile;
    logFile = fopen("detailed.log", "a");
    
    if (logFile == NULL) {
        perror("Помилка відкриття файлу логу.");
        return -1;
    }
    
    logMessage(logFile, "INFO", "Запуск програми");
    // Логіка вашої програми тут
    logMessage(logFile, "ERROR", "Приклад помилки");
    
    fclose(logFile);
    
    return 0;
}
```

Вивід у `detailed.log`:

```
[Чт Бер 10 14:32:01 2023] INFO - Запуск програми
[Чт Бер 10 14:32:02 2023] ERROR - Приклад помилки
```

## Поглиблений огляд

Логування у C, як було показано, покладається на прості операції з файлами, що є ефективним, але не настільки потужним чи гнучким, як функції логування в інших мовах, наприклад, модуль `logging` у Python або `Log4j` в Java. Для більш розширених можливостей логування в C розробники часто звертаються до бібліотек, таких як `syslog` на системах подібних до Unix, який надає управління логами для всієї системи, або сторонніх бібліотек, таких як `log4c`.

Історично, логування завжди було невід'ємною частиною програмування, що починалося з ранніх практик програмування, де відстеження та розуміння потоку програми та помилок зазвичай здійснювалося через фізичні видачі. З розвитком систем логування стало більш вдосконаленим, зараз підтримуючи різні рівні серйозності, ротацію логів, та асинхронне логування.

Хоча стандартна бібліотека C надає базові інструменти для реалізації логування, її обмеження часто призводять до створення користувацьких фреймворків логування або прийняття зовнішніх бібліотек для більш функціонально багатих і гнучких рішень логування. Незважаючи на ці обмеження, розуміння та реалізація базового логування в C є критично важливими для налагодження та підтримки програмного забезпечення, особливо в середовищах, де необхідно мінімізувати зовнішні залежності.
