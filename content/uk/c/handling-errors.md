---
title:                "Обробка помилок"
date:                  2024-01-26T00:51:08.222288-07:00
model:                 gpt-4-1106-preview
simple_title:         "Обробка помилок"
programming_language: "C"
category:             "C"
tag:                  "Good Coding Practices"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/c/handling-errors.md"
---

{{< edit_this_page >}}

## Що і чому?
Обробка помилок в мові C - це очікування несподіваного. Це запобігає безладу в програмах, коли вони натрапляють на проблеми. Програмісти роблять це, щоб витончено обробляти помилки та зберігати надійність свого коду.

## Як це робити:

Давайте подивимося, як це робити на C:

```C
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

int main() {
    FILE *fp = fopen("nonexistentfile.txt", "r");
    if (fp == NULL) {
        perror("Помилка при відкритті файлу");
        return EXIT_FAILURE;
    }
    // Робимо щось з файлом
    fclose(fp);
    return EXIT_SUCCESS;
}
```

Приклад виводу, коли файл не існує:
```
Помилка при відкритті файлу: Немає такого файлу чи директорії
```

## Поглиблений аналіз

У ранні дні C обробка помилок була дуже примітивною - здебільшого повернення кодів помилок та ручні перевірки. З’явилася змінна `errno`, глобальна змінна, яка оновлюється, коли функції зазнають невдачі. Однак сама по собі вона не є безпечною для потоків, тому були введені нові функції `strerror` та `perror` для кращої звітності про помилки.

Альтернативи? Сучасний C не обмежується лише `errno`. Є setjmp і longjmp для не локальних переходів, коли настає катастрофа. Деякі люди віддають перевагу визначенню своїх кодів помилок, тоді як інші оптують за структури подібні до виключень у C++.

Деталі реалізації можуть бути заплутаними. Наприклад, `errno` є безпечною для потоків у системах, що відповідають стандарту POSIX, завдяки магії локального сховища для потоків (TLS). У вбудованих системах, де ресурси є цінними, може бути віддана перевага власному коду обробки помилок перед стандартними підходами, які можуть збільшити обсяг програмного забезпечення.

## Дивіться також

- Детальний аналіз `errno`: https://en.cppreference.com/w/c/error/errno
- Для безпеки потоків ознайомтесь з POSIX потоками та errno: http://man7.org/linux/man-pages/man3/pthread_self.3.html
- Вступ до setjmp и longjmp: https://www.cplusplus.com/reference/csetjmp/
- Для обробки винятків у C++ перегляньте: https://isocpp.org/wiki/faq/exceptions