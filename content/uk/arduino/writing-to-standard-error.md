---
title:                "Запис до стандартної помилки"
aliases:
- uk/arduino/writing-to-standard-error.md
date:                  2024-02-03T19:33:59.650206-07:00
model:                 gpt-4-0125-preview
simple_title:         "Запис до стандартної помилки"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/arduino/writing-to-standard-error.md"
changelog:
  - 2024-02-03, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Що і чому?

Запис до стандартної помилки (stderr) під час програмування на Arduino передбачає перенаправлення повідомлень про помилки та діагностику на окремий канал, завдяки чому вони не змішуються із стандартним виводом (stdout). Програмісти роблять це для того, щоб відрізняти звичайний вивід програми від повідомлень про помилки, що спрощує налагодження та аналіз журналів.

## Як робити:

Arduino за замовчуванням не розрізняє стандартний вивід та стандартну помилку, як це роблять звичайні комп'ютерні системи. Методи `Serial.print()` і `Serial.println()` записують у той самий серійний вивід, який зазвичай переглядається в моніторі серійного порту Arduino IDE. Однак, ми можемо емулювати запис до stderr, виділяючи повідомлення про помилки спеціальним форматуванням або перенаправляючи їх на альтернативний вивід, наприклад, у файл на SD-карті або через мережеве з'єднання.

Для емуляції stderr ви можете додати перед повідомленнями про помилки тег, наприклад, "ERROR:", аби відрізнити їх у моніторі серійного порту:

```cpp
void setup() {
  Serial.begin(9600); // Ініціалізація серійного зв'язку на швидкості 9600 бод
}

void loop() {
  int result = someFunction();
  if (result == -1) {
    // Емуляція stderr за допомогою додавання перед повідомленням про помилку
    Serial.println("ERROR: Функція не вдалась.");
  } else {
    Serial.println("Функція виконана успішно.");
  }
  delay(1000); // Очікування секунди перед перезапуском циклу
}

int someFunction() {
  // Умовна функція, що повертає -1 у разі помилки
  return -1;
}
```

Приклад виводу в моніторі серійного порту Arduino IDE виглядатиме так:

```
ERROR: Функція не вдалась.
```

Для проєктів, котрі вимагають більш складного підходу, зокрема запису на різні фізичні носії, може знадобитися використання сторонніх бібліотек або додаткового обладнання. Наприклад, для журналювання повідомлень про помилки на SD-карті потрібна бібліотека `SD`:

```cpp
#include <SPI.h>
#include <SD.h>

File myFile;

void setup() {
  Serial.begin(9600);
  if (!SD.begin()) {
    Serial.println("ERROR: Не вдалося ініціалізувати SD-карту!");
    return;
  }
  
  myFile = SD.open("error.log", FILE_WRITE);
  if (myFile) {
    myFile.println("ERROR: Функція не вдалась.");
    myFile.close(); // Обов'язково закрийте файл, аби зберегти вміст
  } else {
    Serial.println("ERROR: Не вдалося відкрити error.log!");
  }
}

void loop() {
  // Тут міг би бути ваш основний код
}
```

З цим підходом ви фізично розділяєте звичайний вивід програми та повідомлення про помилки, перенаправляючи останні до файлу `error.log` на SD-карті, що дозволяє проводити аналіз після завершення роботи без засмічення основного каналу виводу.
