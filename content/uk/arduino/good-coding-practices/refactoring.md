---
aliases:
- /uk/arduino/refactoring/
date: 2024-01-26 01:17:18.680853-07:00
description: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 -\
  \ \u0446\u0435 \u043F\u0440\u043E\u0446\u0435\u0441 \u043F\u0435\u0440\u0435\u0440\
  \u043E\u0431\u043B\u0435\u043D\u043D\u044F \u0432\u0430\u0448\u043E\u0433\u043E\
  \ \u043A\u043E\u0434\u0443 \u0437 \u043C\u0435\u0442\u043E\u044E \u043F\u043E\u043A\
  \u0440\u0430\u0449\u0435\u043D\u043D\u044F \u0439\u043E\u0433\u043E \u0441\u0442\
  \u0440\u0443\u043A\u0442\u0443\u0440\u0438 \u0442\u0430 \u0447\u0438\u0442\u0430\
  \u0431\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u0456 \u0431\u0435\u0437 \u0437\
  \u043C\u0456\u043D\u0438 \u0437\u043E\u0432\u043D\u0456\u0448\u043D\u044C\u043E\u0457\
  \ \u043F\u043E\u0432\u0435\u0434\u0456\u043D\u043A\u0438 \u0430\u0431\u043E \u0444\
  \u0443\u043D\u043A\u0446\u0456\u043E\u043D\u0430\u043B\u044C\u043D\u043E\u0441\u0442\
  \u0456.\u2026"
lastmod: 2024-02-18 23:09:00.816747
model: gpt-4-0125-preview
summary: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433 - \u0446\
  \u0435 \u043F\u0440\u043E\u0446\u0435\u0441 \u043F\u0435\u0440\u0435\u0440\u043E\
  \u0431\u043B\u0435\u043D\u043D\u044F \u0432\u0430\u0448\u043E\u0433\u043E \u043A\
  \u043E\u0434\u0443 \u0437 \u043C\u0435\u0442\u043E\u044E \u043F\u043E\u043A\u0440\
  \u0430\u0449\u0435\u043D\u043D\u044F \u0439\u043E\u0433\u043E \u0441\u0442\u0440\
  \u0443\u043A\u0442\u0443\u0440\u0438 \u0442\u0430 \u0447\u0438\u0442\u0430\u0431\
  \u0435\u043B\u044C\u043D\u043E\u0441\u0442\u0456 \u0431\u0435\u0437 \u0437\u043C\
  \u0456\u043D\u0438 \u0437\u043E\u0432\u043D\u0456\u0448\u043D\u044C\u043E\u0457\
  \ \u043F\u043E\u0432\u0435\u0434\u0456\u043D\u043A\u0438 \u0430\u0431\u043E \u0444\
  \u0443\u043D\u043A\u0446\u0456\u043E\u043D\u0430\u043B\u044C\u043D\u043E\u0441\u0442\
  \u0456.\u2026"
title: "\u0420\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433"
---

{{< edit_this_page >}}

## Що і чому?
Рефакторинг - це процес перероблення вашого коду з метою покращення його структури та читабельності без зміни зовнішньої поведінки або функціональності. Програмісти проводять рефакторинг, щоб зробити свій код чистішим, легшим для розуміння та легшим для підтримки, що в довгостроковій перспективі робить виправлення помилок та додавання нових функцій значно менш болісним.

## Як це робити:

Припустимо, у вас є функція на вашому Arduino, яка робить занадто багато, як от:

```Arduino
void setup() {
  Serial.begin(9600);
}

void loop() {
  // Функція, яка робить занадто багато
  handleEverything();
}

void handleEverything() {
  // Читання даних з сенсора
  int sensorValue = analogRead(A0);
  // Обробка даних з сенсора
  sensorValue = map(sensorValue, 0, 1023, 0, 255);
  // Виведення даних з сенсора
  Serial.println(sensorValue);
  delay(500);
}
```

Рефакторинг може виглядати як розділення `handleEverything()` на менші, більш фокусовані функції:

```Arduino
void setup() {
  Serial.begin(9600);
}

void loop() {
  int sensorValue = readSensorData();
  int processedValue = processSensorData(sensorValue);
  printData(processedValue);
  delay(500);
}

int readSensorData() {
  return analogRead(A0);
}

int processSensorData(int sensorValue) {
  return map(sensorValue, 0, 1023, 0, 255);
}

void printData(int data) {
  Serial.println(data);
}
```

Після рефакторингу функція `loop()` стає більш читабельною, і кожне завдання виконується окремо відведеною для нього функцією, що робить код легшим для управління.

## Поглиблений огляд
Історично, рефакторинг набув популярності з появою методологій Agile і Test-Driven Development (TDD), які покладаються на постійне вдосконалення коду для адаптації до змінних вимог. Існує безліч інструментів і стратегій для рефакторингу — як наприклад техніка "Витягнути метод", яку ми використовували у нашому прикладі з Arduino. Це важливо, коли ви переходите від швидкого прототипу до стабільного проекту, де читабельність коду та легкість його підтримки стають критичними.

Під час рефакторингу важливо мати хороший набір тестів, щоб переконатися, що зміни не внесли жодних помилок. У світі Arduino автоматизоване тестування не завжди є прямолінійним через залежності від апаратного забезпечення, але ви все ще можете використовувати модульне тестування для чисто логічних частин або вдаватися до симуляторів.

Альтернативи ручному рефакторингу включають використання спеціалізованих інструментів рефакторингу, які автоматизують ідентифікацію "запашків коду" і пропонують зміни. Однак, ці інструменти часто не враховують нюанси коду для мікроконтролерів і можуть бути недоступні в середовищі розробки Arduino.

В кінцевому підсумку, рефакторинг - це мистецтво, яке балансує між покращенням внутрішньої структури коду та ризиком внесення дефектів. Це вимагає від вас роздумів про деталі реалізації, такі як використання пам'яті та часу процесора, особливо з огляду на обмежені ресурси мікроконтролерів.

## Дивіться також
Ви можете глибше зануритися в рефакторинг з основоположною книгою Мартіна Фаулера *Refactoring: Improving the Design of Existing Code*. Для більш детального огляду практик специфічних для Arduino, ознайомтесь з форумами та спільнотами розробників Arduino:

- [Форум Arduino - Питання Програмування](https://forum.arduino.cc/index.php?board=4.0)
- [Refactoring Guru](https://refactoring.guru/refactoring)

Пам'ятайте, мета - це чистий, зрозумілий код, за який майбутній ви та інші будуть вам вдячні. Продовжуйте хакати і тримайте все в порядку!
