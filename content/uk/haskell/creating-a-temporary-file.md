---
title:                "Haskell: Створення тимчасового файлу"
programming_language: "Haskell"
category:             "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/haskell/creating-a-temporary-file.md"
---

{{< edit_this_page >}}

## Чому?

Створення тимчасових файлів є важливою частиною багатьох програм, особливо тих, які займаються обробкою та збереженням даних. Це дає змогу зберігати дані проміжних результатів та забезпечує безпечне використання пам'яті в процесі роботи програми.

## Як це зробити?

Щоб створити тимчасовий файл у Haskell, спочатку треба імпортувати модуль "System.IO", який містить необхідні функції для роботи з файлами. Потім достатньо викликати функцію "withSystemTempFile", яка приймає два аргументи: шлях до тимчасового файлу та функцію, яка описує процес роботи з файлом. Далі можна працювати з тимчасовим файлом, використовуючи звичайні операції з файлами, наприклад, читання та запис.

```Haskell
import System.IO

main :: IO ()
main = withSystemTempFile "tmpfile.txt" $ \tempFilePath tempFileHandle -> do
  putStrLn "Тимчасовий файл створено."
  hPutStrLn tempFileHandle "Це зміст тимчасового файлу."
  hClose tempFileHandle
  putStrLn "Зміст записано у тимчасовий файл."
```

Після завершення роботи з тимчасовим файлом, його вміст можна прочитати за допомогою функції "readFile":

```Haskell
main = withSystemTempFile "tmpfile.txt" $ \tempFilePath tempFileHandle -> do
  content <- readFile tempFilePath
  putStrLn content
````

В результаті виконання програми буде виведено на екран зміст тимчасового файлу:

```
Тимчасовий файл створено.
Зміст записано у тимчасовий файл.
Це зміст тимчасового файлу.
```

## Глибше погляду

Одною з переваг використання функції "withSystemTempFile" є те, що вона автоматично забезпечує видалення тимчасового файлу після завершення роботи з ним. Також, у разі виникнення помилки під час виконання програми, тимчасовий файл буде видалено автоматично.

Щоб зробити операції з тимчасовим файлом безпечнішими, можна використовувати функцію "withTempFile". Вона працює аналогічно до "withSystemTempFile", але дозволяє вказати директорію для створення тимчасового файлу та задати префікс та суфікс назви файлу.

## Дивись також
- [Документація по модулю System.IO](https://hackage.haskell.org/package/base-4.15.0.0/docs/System-IO.html)
- [Приклади роботи з тимчасовими файлами у Haskell](https://wiki.haskell.org/Temporary_files)